<div dir="ltr" style="text-align: left;" trbidi="on">
<div>
  <img src="http://res.cloudinary.com/dimaslanjaka/image/fetch/https://i.ytimg.com/vi/tbvxFW4UJdU/maxresdefault.jpg" alt="grecaptcha">
</div>
  <b>Requirements:</b>
  <ol style="text-align: left;">
    <li>jQuery (if not it will automated added into pages)&nbsp;</li>
    <pre>
      if (typeof jQuery == &apos;undefined&apos; || !window.jQuery) {
        var hs = document.createElement(&apos;script&apos;);
        hs.type = &apos;text/javascript&apos;;
        hs.async = true;
        hs.src = &apos;https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js&apos;;
        document.getElementsByTagName(&apos;head&apos;)[0].appendChild(hs);
        document.getElementsByTagName(&apos;body&apos;)[0].appendChild(hs);
        document.head.appendChild(hs);
        document.body.appendChild(hs);
      }
    </pre>

    <li>Recaptcha Site Key And Secret (backend): <a href="https://www.google.com/recaptcha/admin/">Get Here</a></li>
    <pre>
    //Set site key as global variable
    const g_site_key = 'YOUR_SITE_KEY';
    </pre>

    <li>Main Code:</li>
    <pre>
        //loader
        (function () {
          submitDisable();
          download_script(&apos;https://www.google.com/recaptcha/api.js?render=&apos;+g_site_key+&apos;&amp;render=explicit&apos;, function () {
            grecaptcha.ready(function () {
              gexec();
            });
          });
        })();
      //function callback
      function gexec(){ //also refresh function
        grecaptcha.execute(g_site_key, { action: &apos;homepage&apos; }).then(function (token) {
          recaptcha_insert_token(token); //insert element token into form
        });
      }
      //function add recaptcha elements
      function recaptcha_insert_token(token) {
        if (typeof jQuery == &apos;undefined&apos;){
          console.log(&apos;JQuery Not Loaded&apos;);
        } else {
          var f = $(&apos;form&apos;), fg = f.find(&apos;[name=&quot;g-recaptcha-response&quot;]&apos;);
        if (fg.length === 0){
          $(&apos;&lt;input type=&quot;hidden&quot; readonly value=&quot;&apos; + token + &apos;&quot; name=&quot;g-recaptcha-response&quot;&gt;&apos;).appendTo(f);
        } else {
          fg.val(token);
        }
        }
      }
    </pre>
  </ol>

  <h2>Complete Code</h2>
  <b>HTML</b>
  <pre>
      &lt;!--button refresh token (example)--&gt;
      &lt;button class=&quot;btn-block btn&quot; onclick=&quot;gexec()&quot;&gt;Refresh&lt;/button&gt;
  </pre>
  <b>Javascript</b>
  <pre>
    //load jQuery if not exists (automated)
    if (typeof jQuery == &apos;undefined&apos; || !window.jQuery) {
      var hs = document.createElement(&apos;script&apos;);
      hs.type = &apos;text/javascript&apos;;
      hs.async = true;
      hs.src = &apos;https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js&apos;;
      document.getElementsByTagName(&apos;head&apos;)[0].appendChild(hs);
      document.getElementsByTagName(&apos;body&apos;)[0].appendChild(hs);
      document.head.appendChild(hs);
      document.body.appendChild(hs);
    }
    //set site key
    const g_site_key = 'YOUR_SITE_KEY';
    //loader
    (function () {
      submitDisable();
      download_script(&apos;https://www.google.com/recaptcha/api.js?render=&apos;+g_site_key+&apos;&amp;render=explicit&apos;, function () {
        grecaptcha.ready(function () {
          gexec();
        });
      });
    })();
    //function callback
    function gexec(){ //also refresh function
      grecaptcha.execute(g_site_key, { action: &apos;homepage&apos; }).then(function (token) {
        recaptcha_insert_token(token); //insert element token into form
      });
    }
    //function add recaptcha elements
    function recaptcha_insert_token(token) {
      if (typeof jQuery == &apos;undefined&apos;){
        console.log(&apos;JQuery Not Loaded&apos;);
      } else {
        var f = $(&apos;form&apos;), fg = f.find(&apos;[name=&quot;g-recaptcha-response&quot;]&apos;);
      if (fg.length === 0){
        $(&apos;&lt;input type=&quot;hidden&quot; readonly value=&quot;&apos; + token + &apos;&quot; name=&quot;g-recaptcha-response&quot;&gt;&apos;).appendTo(f);
      } else {
        fg.val(token);
      }
      }
    }
  </pre>
  <b>PHP (backend)</b>
  <pre>
      &lt;?php
      function recaptcha_verify($secret)
      {
      &#x9;if (isset($_POST[&apos;g-recaptcha-response&apos;])) {
      &#x9;&#x9;$response = $_POST[&apos;g-recaptcha-response&apos;];
      &#x9;&#x9;$remoteip = $this-&gt;getUIP();
      &#x9;&#x9;$secret = $this-&gt;recaptcha_s;
      &#x9;&#x9;$g_response = json_decode(file_get_contents(&apos;https://www.google.com/recaptcha/api/siteverify?secret=&apos; . $secret . &apos;&amp;response=&apos; . $response . &apos;&amp;remoteip=&apos; . $remoteip), true);
      &#x9;&#x9;if (isset($g_response[&apos;success&apos;]) &amp;&amp; true === $g_response[&apos;success&apos;]) {
      &#x9;&#x9;&#x9;return true;
      &#x9;&#x9;} else {
      &#x9;&#x9;&#x9;return false;
      &#x9;&#x9;}
      &#x9;}
      }

      if (isset($_POST[&apos;login&apos;])){ //example if you have post named login
      &#x9;if (recaptcha_verify(&apos;YOUR_SECRET_KEY_HERE&apos;) !== false){
      &#x9;&#x9;/* Recaptcha Success */
      &#x9;} else {
      &#x9;&#x9;/* Recaptcha Failed */
      &#x9;}
      }
  </pre>
  <h2>Full Example at Codepen</h2>
  <div class="codepen" data-default-tab="js,result" data-height="265" data-pen-title="Complete Google recaptcha v3" data-slug-hash="qzgYmp" data-theme-id="0" data-user="dimaslanjaka" style="border: 2px solid; box-sizing: border-box; display: flex; height: 265px; margin: 1em 0; padding: 1em;">
    See the Pen <a href="https://codepen.io/dimaslanjaka/pen/qzgYmp/">
      Complete Google recaptcha v3</a> by dimas lanjaka (<a href="https://codepen.io/dimaslanjaka">@dimaslanjaka</a>)
    on <a href="https://codepen.io/">CodePen</a>.
  </div>
  <script async="" src="https://static.codepen.io/assets/embed/ei.js"></script>

</div>