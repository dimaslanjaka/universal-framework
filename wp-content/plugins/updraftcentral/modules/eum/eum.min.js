function UpdraftCentral_EUM_Management(){var l,o=this,c=jQuery,_=new UpdraftCentral_Collection,i=(UpdraftCentral.get_debug_level(),"Easy Updates Manager"),g="Easy Updates Manager Premium",e=c("#updraftcentral_dashboard_existingsites"),m={};function h(e,t,a){var n=!1,r=!1,i=a;return l=a,e||(n=!0,-1!==i.indexOf("Premium")&&(i=i.replace(" Premium",""))),a={action:{install_and_activate:n,activate:r=!t&&e?!0:r,messages:{not_installed:vsprintf(udclion.plugin_not_installed,[i]),install_and_activate:udclion.plugin_install_and_activate,not_activated:vsprintf(udclion.plugin_not_activated,[l]),activate:udclion.plugin_activate}}},UpdraftCentral.template_replace("eum-eum-not_active",a)}function t(t,a){var n="",r=d(t);UpdraftCentral.set_loading(r),b(t,g).then(function(e){e.installed&&e.active?o.load_contents(t,a):(o.current_section=a,e.installed?!e.active&&e.installed&&(n=h(e.installed,e.active,g),UpdraftCentral.done_loading(r,n)):b(t,i).then(function(e){e.installed&&e.active?o.load_contents(t,a):(n=h(e.installed,e.active,i),UpdraftCentral.done_loading(r,n))}).fail(function(e){s(e),UpdraftCentral.done_loading(r,n)}))}).fail(function(e){s(e),UpdraftCentral.done_loading(r,n)})}function d(e){var e=e.find(".updraftcentral_row_extracontents"),t=e.find(".updraftcentral_eum_rows");return t=0===t.length?c('<div class="updraftcentral_eum_rows"></div>').appendTo(e):t}function s(e){var t;void 0===e.data||null!==(e=e.data)&&void 0!==e.message&&(void 0===(t=udclion.eum[e.message])&&void 0===(t=udclion[e.message])&&(t=udclion.unknown_response),void 0!==e.values?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+vsprintf(t,e.values)+"</p>"):UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+t+"</p>"))}function u(e){var a="";return"object"==(e=void 0===e?"string":e)?a=c(".updraftcentral_eum_rows input[name!='action'], .updraftcentral_eum_rows textarea, .updraftcentral_eum_rows select").serializeJSON({useIntKeysAsArrayIndex:!0}):(a=c(".updraftcentral_eum_rows input[name!='action'], .updraftcentral_eum_rows textarea, .updraftcentral_eum_rows select").serialize(),c.each(c(".updraftcentral_eum_rows input[type=checkbox]").filter(function(e){return 0==c(this).prop("checked")}),function(e,t){a+="&"+c(t).attr("name")+"=0"})),a}function p(t,a){var n=c.Deferred();return UpdraftCentral.send_site_rpc("eum.get_version",{},a,function(e){"-1"==function(e,t,a){var n=a&&a.lexicographical||!1,a=a&&a.zero_extend||!0,r=(e||"0").split("."),i=(t||"0").split(".");function l(e){return(n?/^\d+[A-Za-zαß]*$/:/^\d+[A-Za-zαß]?$/).test(e)}if(!r.every(l)||!i.every(l))return NaN;if(a){for(;r.length<i.length;)r.push("0");for(;i.length<r.length;)i.push("0")}n||(r=r.map(function(e){var t=/[A-Za-zαß]/.exec(e);return Number(t?e.replace(t[0],"."+e.charCodeAt(t.index)):e)}),i=i.map(function(e){var t=/[A-Za-zαß]/.exec(e);return Number(t?e.replace(t[0],"."+e.charCodeAt(t.index)):e)}));for(var o=0;o<r.length;++o){if(i.length==o)return 1;if(r[o]!=i[o])return r[o]>i[o]?1:-1}return r.length!=i.length?-1:0}(e.data,"9.0.0")?(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.eum.plugin_name+"</h2><p>"+udclion.eum.version_incompatibility+"</p>"),UpdraftCentral.done_loading(a)):UpdraftCentral.send_site_rpc("eum."+t.name,t.arguments,a,function(e,t,a){"ok"!==t||void 0===e.data||null===e.data||e.data.error?n.reject(e):n.resolve(e.data)})}),n.promise()}function b(e,t){return UpdraftCentral.is_plugin_active(e,t)}function f(e,t){var a={},n=c("#current-page-selector"),r=(0===n.length&&(n=c("#table-paging")),null);switch(void 0!==t&&(r=t.search.substring(1)),e){case"pagination":a.paged=v(r,"paged");break;case"pagination_input":case"bulk":case"save_settings":a.paged=parseInt(c("input[name=paged]").val())||"1"}return a.m=c("#filter-by-date").val(),a.status=c("#filter-by-success").val(),a.action_type=c("#filter-by-action").val(),a.type=c("#filter-by-type").val(),a.order=c("#filter-by-order").val(),a.data=u("string"),null!==r?(a.tab=v(r,"tab")||"",a.view=v(r,"view")||"all"):(a.tab=n.data("tab")||"",a.view=n.data("view")||"all"),a}function v(e,t){if(void 0===e||void 0===t)return!1;for(var a=e.split("&"),n=0;n<a.length;n++){var r=a[n].split("=");if(t===r[0])return r[1]}return!1}function w(e){var t=e.find(".eum_cron_schedule").val(),a=(e.find(".eum_cron_time"),e.find(".eum_week_number")),n=e.find(".eum_week_days"),r=e.find(".eum_day_number_wrapper");switch(t){case"twicedaily":case"daily":n.hide(),a.hide(),r.css("display","none");break;case"weekly":n.show(),a.hide(),r.css("display","none");break;case"fortnightly":n.show(),a.show(),r.css("display","none");break;case"monthly":n.hide(),a.hide(),r.css("display","inline-block")}}c("#updraft-central-content").on("scroll",function(){c("#eum-save-settings-warning").css("top",c(this).scrollTop()+100)}),e.on("updraftcentral_dashboard_mode_set_eum",function(){UpdraftCentral.register_row_clicker(".eum-dashboard-app .toggle-wrapper button",function(e,t,a){c("#eum-save-settings-warning").fadeIn("slow")},!0),UpdraftCentral.register_row_clicker(".updraftcentral_site_general",function(e){t(e,"general")},!0),UpdraftCentral.register_row_clicker(".eum-dashboard-app .eum-toggle-button",function(e,t,a){var n=c(a.currentTarget).parent(),r=(n.children(".eum-toggle-button").removeClass("eum-active"),c(a.currentTarget).attr("id").replace(/-/g,"_"));r+="_status",n.prev().text(udclion.eum[r]),c(a.currentTarget).addClass("eum-active")},!0),UpdraftCentral.register_row_clicker(".updraftcentral_site_plugins",function(e){t(e,"plugins")},!0),UpdraftCentral.register_row_clicker(".updraftcentral_site_themes",function(e){t(e,"themes")},!0),UpdraftCentral.register_row_clicker(".updraftcentral_site_logs",function(e){t(e,"logs")},!0),UpdraftCentral.register_row_clicker(".updraftcentral_site_advanced",function(e){t(e,"advanced")},!0),UpdraftCentral.register_row_clicker(".tablenav-pages a",function(e,t,a){a=f("pagination",a.currentTarget);o.load_contents(e,a.tab,{data:a})},!0),UpdraftCentral.register_row_clicker("input[name=paged]",function(t,e,a){13!==a.which?window.setTimeout(function(){var e=f("pagination_input");o.load_contents(t,e.tab,{data:e})},500):a.preventDefault()},!0,"keyup"),UpdraftCentral.register_row_clicker(".subsubsub a",function(e,t,a){c(".subsubsub a").removeClass("current"),c(a.currentTarget).addClass("current");a=f("filters",a.currentTarget);o.load_contents(e,a.tab,{data:a})},!0);UpdraftCentral.register_row_clicker([".toggle-wrapper-plugins .eum-toggle-button",".toggle-wrapper-plugins-automatic .eum-toggle-button",".toggle-wrapper-themes .eum-toggle-button",".toggle-wrapper-themes-automatic .eum-toggle-button"].join(", "),function(e,t,a){var n=f(),a=c(a.currentTarget),r=a.closest(".toggle-wrapper").find("input"),i=a.closest(".toggle-wrapper"),l=i.closest(".eum-"+n.tab+"-name-actions").find(".eum-"+n.tab+"-automatic-wrapper");a.addClass("eum-active"),a.hasClass("eum-enabled")?(a.next().removeClass("eum-active"),r.prop("value","true"),i.hasClass("toggle-wrapper-"+n.tab)&&(l.find("input").prop("value",!1),l.find(".eum-disabled").addClass("eum-active"),l.find(".eum-enabled").removeClass("eum-active"),l.slideDown())):(i.hasClass("toggle-wrapper-"+n.tab)&&l.slideUp(),a.prev().removeClass("eum-active"),r.prop("value","false"),l.find("input").prop("value",!1)),c("#eum-save-settings-warning").fadeIn()},!0),UpdraftCentral.register_row_clicker("#eum-save-settings",function(e,t,a){var n=f("save_settings");o.load_contents(e,"save_"+n.tab+"_update_options",{data:n})},!0),UpdraftCentral.register_row_clicker("#eum-save-general-settings",function(e,t,a){var n,r={};r.data=(n=[],c(".eum-active").each(function(e){var t=c(this).attr("id");n.push(t)}),n),o.load_contents(e,"save_general_options",{data:r})},!0),UpdraftCentral.register_row_clicker("#save-logs-settings",function(e){p({name:"save_logs_settings",arguments:u("string")},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e+"</p>")}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#eum-save-emails",function(e){p({name:"save_notification_emails",arguments:c("#notification-emails").val().trim()},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e+"</p>")}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#cb-select-all-1, #cb-select-all-2",function(e,t,a){c(a.currentTarget).is(":checked")?(("cb-select-all-1"===a.currentTarget.id?c("#cb-select-all-2"):c("#cb-select-all-1")).prop("checked",!0),e.find("input[name*=checked]").prop("checked",!0)):(c("#cb-select-all-1, #cb-select-all-2").prop("checked",!1),e.find("input[name*=checked]").prop("checked",!1))},!0,"change"),UpdraftCentral.register_row_clicker("#doaction, #doaction2",function(e,t,a){var n;0!==e.find("input:checked").length&&(n=f("bulk"),o.load_contents(e,"bulk_action_"+n.tab+"_update_options",{data:n}),c("#bulk-action-selector-top, #bulk-action-selector-bottom").val("-1"))},!0),UpdraftCentral.register_row_clicker("#post-query-submit",function(e,t,a){var n=f();o.load_contents(e,n.tab,{data:n})},!0),UpdraftCentral.register_row_clicker("#filter-by-date, #filter-by-success, #filter-by-action, #filter-by-type, #filter-by-order",function(e,t,a){var n=f();o.load_contents(e,n.tab,{data:n})},!0,"change"),UpdraftCentral.register_event_handler("click","#log-query-search",function(e){var t=f();return t.is_search=!0,t.search_term=jQuery("#eum-log-search").val(),t.view="search",o.load_contents($site_row,t.tab,{data:t}),!1}),UpdraftCentral.register_row_clicker("#form-disable-logs",function(e,t,a){var n=f();n.disable_logs=!0,o.load_contents(e,n.tab,{data:n})},!0),UpdraftCentral.register_row_clicker("#form-enable-logs",function(e,t,a){var n={tab:"logs",enable_logs:!0};o.load_contents(e,n.tab,{data:n})},!0),UpdraftCentral.register_row_clicker(".eum_logger_type input",function(e,t,a){e.find(".eum_logger_type").each(function(e,t){!0===c("input",t)[0].checked?c(".eum_logger_additional_options",t).show():c(".eum_logger_additional_options",t).hide()})},!0,"change"),UpdraftCentral.register_row_clicker("#btn-eum-activate",function(t){var e,a=d(t);UpdraftCentral.set_loading(a),e=l,UpdraftCentral.activate_plugin(t,e).then(function(e){e.activated&&o.load_contents(t,o.current_section)}).fail(function(e){s(e),UpdraftCentral.done_loading(a)})},!0),UpdraftCentral.register_row_clicker("#btn-eum-install-activate",function(t){var e,a=d(t);UpdraftCentral.set_loading(a),e="stops-core-theme-and-plugin-updates",UpdraftCentral.install_activate_plugin(t,i,e).then(function(e){(e.installed||e.activated)&&o.load_contents(t,o.current_section)}).fail(function(e){s(e),UpdraftCentral.done_loading(a)})},!0),UpdraftCentral.register_row_clicker("#force-updates",function(e){p({name:"force_updates",arguments:{}},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e.message+"</p>")}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#save-excluded-users",function(e){p({name:"save_excluded_users",arguments:u("string")},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e+"</p>")}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#eum_ud_enable_auto_backup",function(t){p({name:"enable_auto_backup",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e+"</p>"),e=t.find("#eum_ud_enable_auto_backup"),t.find("#eum-auto-backup-description").text(udclion.eum.enabled_auto_backup_description),e.prop("id","eum_ud_disable_auto_backup"),e.val(udclion.eum.disable_auto_backup))}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#eum_ud_disable_auto_backup",function(t){p({name:"disable_auto_backup",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e+"</p>"),e=t.find("#eum_ud_disable_auto_backup"),t.find("#eum-auto-backup-description").text(udclion.eum.disabled_auto_backup_description),e.prop("id","eum_ud_enable_auto_backup"),e.val(udclion.eum.enable_auto_backup))}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker(".eum_cron_schedule",function(e){w(e)},!0,"change"),UpdraftCentral.register_row_clicker("#save-cron-schedule",function(t){p({name:"save_cron_schedule",arguments:u("string")},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+udclion.eum.update_cron_scheduled+"</p>"),t.find("#eum-next-cron-schedule").html(e.time))}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#save-delay-updates",function(e){var t={name:"save_delay_updates",arguments:u("string")},a=parseInt(c("#delay-updates").val());Number.isInteger(a)&&0<=a&&p(t,e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e+"</p>")}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#save-anonymize-update-option",function(e){p({name:"save_anonymize_updates",arguments:u("string")},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.result+"</h2><p>"+e+"</p>")}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#eum-settings-export",function(i){p({name:"export_settings",arguments:{}},i).then(function(e){var t,a,n,r;void 0!==e&&!1!==e&&(n=i[0].dataset.site_description.toLowerCase().replace(/ /g,"-"),t=(r=new Date).getUTCMonth()+1,a=r.getUTCDate(),n=n+"-"+(r.getUTCFullYear()+"-"+t+"-"+a)+".json",(r=document.body.appendChild(document.createElement("a"))).setAttribute("download",n),r.setAttribute("style","display:none;"),r.setAttribute("href","data:text/json;charset=UTF-8,"+encodeURIComponent(e)),r.click())}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#eum-settings-import",function(t){var e,a=t.find("#import_settings")[0];0!==a.files.length?(a=a.files[0],(e=new FileReader).onload=function(){var e=function(t){try{return JSON.parse(t)}catch(e){console.log("UC: Exception when trying to parse JSON (1) - will attempt to fix/re-parse"),console.log(t)}var a=t.indexOf("{"),n=t.lastIndexOf("}");if(-1<a&&-1<n){var e=t.slice(a,n+1);try{var r=JSON.parse(e);return console.log("UC: JSON re-parse successful"),r}catch(e){console.log("UC: Exception when trying to parse JSON (2) - will attempt to fix/re-parse based upon bracket counting");for(var i=a,l=0,o="",c=!1;(0<l||i==a)&&i<=n;){var d=t.charAt(i);c||"{"!=d?c||"}"!=d?'"'==d&&"\\"!=o&&(c=!c):l--:l++,o=d,i++}console.log("Started at cursor="+a+", ended at cursor="+i+" with result following:"),console.log(t.substring(a,i));try{r=JSON.parse(t.substring(a,i));return console.log("UC: JSON re-parse successful"),r}catch(e){throw e}}}throw"UC: could not parse the JSON"}(this.result);if(e.meta.site_url+"/"!==t[0].dataset.site_url&&!confirm(udclion.eum.import_confirmation))return;p({name:"import_settings",arguments:{data:e.data}},t).then(function(e){UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>")}).fail(function(e){s(e)})},e.readAsText(a)):alert(udclion.eum.import_select_file)},!0),UpdraftCentral.register_row_clicker("#enable-logs",function(e){p({name:"enable_logs",arguments:{}},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>")}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#clear-logs",function(e){p({name:"clear_logs",arguments:{}},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>")}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#enable-webhook,#refresh-webhook",function(t){p({name:"enable_webhook",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e.message+"</p>"),t.find("#eum-webhook-url").val(e.hook_url),t.find("#eum-webhook-url-wrapper").removeClass("eum-hidden"),t.find("#eum-webhook-copy").html(udclion.eum.webhook_copy),($enableButton=t.find("#enable-webhook")).attr("id","disable-webhook"),$enableButton.val(udclion.eum.webhook_disable))}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#whitelist-save",function(e){p({name:"whitelist_save",arguments:{data:{plugin_name:c("#eum-whitelabel-text").val(),plugin_author:c("#eum-whitelabel-author").val(),plugin_url:c("#eum-whitelabel-url").val(),notices:c("#whitelist-notices").is(":checked")}}},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>")}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#whitelist-reset",function(t){p({name:"whitelist_reset",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e.message+"</p>"),t.find("#eum-whitelabel-text").val(e.name),t.find("#eum-whitelabel-author").val(e.author),t.find("#eum-whitelabel-url").val(e.url),t.find("#whitelist-notices").prop("checked","checked"))}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#eum-webhook-copy",function(e){document.getElementById("eum-webhook-url").select(),document.execCommand("copy"),e.find("#eum-webhook-copy").html(udclion.eum.webhook_copied)},!0),UpdraftCentral.register_row_clicker("#disable-webhook",function(t){p({name:"disable_webhook",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>"),t.find("#eum-webhook-url-wrapper").addClass("eum-hidden"),t.find("#eum-webhook-url").val(""),($disableButton=t.find("#disable-webhook")).attr("id","enable-webhook"),$disableButton.val(udclion.eum.webhook_enable))}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#enable-safe-mode",function(t){p({name:"enable_safe_mode",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>"),t.find("#enable-safe-mode").val(udclion.eum.disable_safe_mode),t.find("#enable-safe-mode").attr("id","disable-safe-mode"))}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#disable-safe-mode",function(t){p({name:"disable_safe_mode",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>"),t.find("#disable-safe-mode").val(udclion.eum.enable_safe_mode),t.find("#disable-safe-mode").attr("id","enable-safe-mode"))}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#eum-check-plugins",function(a){var e=!1;a.find("#eum-check-plugins-force").is(":checked")&&(e=!0),a.find("#eum-check-plugins-status").css("display","none"),p({name:"check_plugins",arguments:{force:e}},a).then(function(e){var t;void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e.message+"</p>"),t=a.find("#eum-check-plugins-status"),a.find("#eum-check-plugins-force").prop("checked",!1),(e.errors?t.css("display","block").removeClass("mpsum-notice").addClass("mpsum-error"):t.css("display","block").removeClass("mpsum-error").addClass("mpsum-notice")).html(e.message))}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#reset-options",function(e){p({name:"reset_options",arguments:{}},e).then(function(e){void 0!==e&&!1!==e&&UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>")}).fail(function(e){s(e)})}),UpdraftCentral.register_row_clicker("#enable-version-control",function(t){p({name:"enable_version_control",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>"),t.find("#enable-version-control").val(udclion.eum.disable_version_control),t.find("#enable-version-control").attr("id","disable-version-control"))}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#disable-version-control",function(t){p({name:"disable_version_control",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>"),t.find("#disable-version-control").val(udclion.eum.enable_version_control),t.find("#disable-version-control").attr("id","enable-version-control"))}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#enable-unmaintained-plugins-check",function(t){p({name:"enable_unmaintained_plugins_check",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>"),t.find("#enable-unmaintained-plugins-check").val(udclion.eum.disable_unmaintained_plugin_check),t.find("#enable-unmaintained-plugins-check").attr("id","disable-unmaintained-plugins-check"))}).fail(function(e){s(e)})},!0),UpdraftCentral.register_row_clicker("#disable-unmaintained-plugins-check",function(t){p({name:"disable_unmaintained_plugins_check",arguments:{}},t).then(function(e){void 0!==e&&!1!==e&&(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.succeeded+"</h2><p>"+e+"</p>"),t.find("#disable-unmaintained-plugins-check").val(udclion.eum.enable_unmaintained_plugin_check),t.find("#disable-unmaintained-plugins-check").attr("id","enable-unmaintained-plugins-check"))}).fail(function(e){s(e)})},!0)}),this.save_settings=function(e){var t,a,n,r=d(e),i=u();UpdraftCentral.set_loading(r),i=i,a=e,n=c.Deferred(),p({name:"save_settings",arguments:i},a).then(function(e){n.resolve(e)}).fail(function(e){n.reject(e)}),n.promise().then(function(e){void 0!==e.save_results&&(t=e.save_results)}).fail(function(e){s(e)}).always(function(){UpdraftCentral.done_loading(r).then(function(){void 0!==t&&(void 0!==t.errors&&t.errors.length?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.eum.save_settings_heading+"</h2><p>"+t.errors[0]+"</p>"):(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.eum.save_settings_heading+"</h2><p>"+t.messages[0]+"</p>"),o.load_contents(e,"settings")))})})},this.load_contents=function(e,t,a){-1!==["general","plugins","themes","logs","advanced"].indexOf(t)&&(t="get_"+t+"_contents"),void 0===a&&(a={});var n,r="",i=d(e),l="site_"+e.data("site_id"),l=(_.exists(l)||(n=new UpdraftCentral_Site(e),_.add(l,n)),{name:t,arguments:a});UpdraftCentral.set_loading(i),p(l,e).then(function(e){void 0!==e&&(r=e)}).fail(function(e){e=s(e)}).always(function(){if("get_general_contents"===t||"save_general_options"===t){if("string"==typeof r)return void UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+r+"</p>");var a=r;return n=a,c.each(n,function(e,t){"email_addresses"==e&&(m=n[e],delete n[e])}),r=UpdraftCentral.template_replace("eum-general",{eum:udclion.eum,options:n}),"off"===a.logs?e.find(".updraftcentral_site_logs").hide():e.find(".updraftcentral_site_logs").show(),void UpdraftCentral.done_loading(i,r).then(function(){c("#notification-emails").prop("value",m);var e,t=a;for(e in t){"automatic_updates"===e&&"unset"===t[e]&&(t[e]="default");e=e.replace(/_/g,"-")+"-"+t[e];c("#"+e).addClass("eum-active")}})}var n;UpdraftCentral.done_loading(i,r).then(function(){r&&r.length?(UpdraftCentral.register_event_handler("click",".updraftcentral_eum_rows #force-updates",function(){p({name:"force_updates",arguments:{}},e).then(function(e){void 0!==e&&!1!==e&&console.log(e)})}),w(e),jQuery("p.submit").css("display","block")):(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion.eum.could_not_return_content+"</p>"),i.empty())})})}}jQuery(function(e){new UpdraftCentral_EUM_Management});