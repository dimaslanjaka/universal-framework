function UpdraftCentral_Post(f){var m=this,v=jQuery,c=(this.pagination,this.current_group,this.current_section,this.manage_data=new UpdraftCentral_Collection,this.uc_editor={edits:new UpdraftCentral_Collection,state:new UpdraftCentral_Collection},this.quick_edits=new UpdraftCentral_Collection,this.dirty_edits=new UpdraftCentral_Collection,this.editor_reload_required=!1,this.wp_versions=new UpdraftCentral_Collection,this.reset_info={data:null,previous_status:null,location:null},new UpdraftCentral_Collection,50);function g(t,e){for(var i,a=m.manage_data.item("response"),n=[],s=0;s<a[f.type+"s"].length;s++){var o=a[f.type+"s"][s];t.post.ID==o.post.ID?n.push({post:t.post,misc:t.misc}):n.push({post:o.post,misc:o.misc})}m.pagination.set_remote_data({info:a.info,items:n}),p(1,$site_row),e!=t.post.post_status&&(--(i=a[f.type+"s_count"])[e],i[t.post.post_status]+=1,a[f.type+"s_count"]=i,m.manage_data.update("response",a),_(i),v('ul#uc-navlinks a.uc-navlink-item[data-group="'+t.post.post_status+'"]').trigger("click"))}function w(t){if(void 0!==t.data.post){try{var s=t.data.post,r=t.data.misc;"publish"==s.post_status&&v("#uc-editor-buttons > button#uc-switch-draft").show()}catch(t){console.log(t)}var e=setInterval(function(){v("div#wp-uc_classic_editor-wrap").length&&(v("#submitdiv div#publishing-action input#publish").attr("onsubmit","return false;"),v(".wp-editor-tabs button.wp-switch-editor").on("click",function(){v(this).hasClass("switch-html")?(v("div.mce-tinymce.mce-container").hide(),v("textarea.wp-editor-area").css("visibility","visible").show()):(v("textarea.wp-editor-area").hide(),v("div.mce-tinymce.mce-container").css("visibility","visible").show())}),clearInterval(e),v(window).scrollTop(0),"post"==f.type&&v("div#category-all.tabs-panel").scrollTop(0),"undefined"!=typeof tinymce&&tinymce&&m.init_tiny_mce("uc_classic_editor"),-1!==v.inArray(s.post_status,["publish","future"])&&v("div#submitpost input#publish").val(udclion[f.type+"s"].update),"future"!==s.post_status&&m.is_input_future_date()&&v("div#submitpost input#publish").val(udclion[f.type+"s"].schedule),r.hasOwnProperty("sticky")&&(v("div#post-visibility-select span#sticky-span input#sticky").prop("checked",r.sticky),"public"===v('div#post-visibility-select input[name="visibility"]:checked').val()&&v("div#post-visibility-select span#sticky-span input#sticky").is(":checked")&&v("div#misc-publishing-actions span#post-visibility-display").html(udclion.posts.public+", "+udclion.posts.sticky)),s.hasOwnProperty("post_parent")&&s.post_parent&&v("#uc-page-attributes-container select#parent_id").val(s.post_parent),r.hasOwnProperty("template")&&r.template&&v("#uc-page-attributes-container select#page_template").val(r.template)),v("div#submitpost").find("input#save-post, input#publish").attr("class","btn btn-primary publishing-buttons"),void 0!==r.link&&r.link&&v("div#classic-editor-dashboard div.post-action-buttons a#uc_preview_changes").attr("href","#").removeAttr("target").attr("onclick",'UpdraftCentral_Library.open_browser_at(UpdraftCentral.$site_row, { module: "direct_url", url: "'+r.link+"\" }, jQuery('#updraftcentral_dashboard_wrapper'));");var t=v("div#postimagediv").find("a#set-post-thumbnail");void 0!==t&&t.length&&t.attr("href",""),v("div#submitpost div#save-action input#save-post").on("click",function(){switch(v(this).val().toLowerCase()){case udclion[f.type+"s"].save_as_pending.toLowerCase():m.uc_editor.edits.update("status","pending");break;case udclion[f.type+"s"].save_draft.toLowerCase():m.uc_editor.edits.update("status","draft")}m.uc_editor.state.update("save_draft_pending",!0),v("div#submitpost div#publishing-action input#publish").trigger("click")}),v("div#submitpost div#publishing-action input#publish").on("click",function(){var t,n,e=v(this).closest("div#classic_editor_container"),i=v(this).val();m.uc_editor.state.exists("editing")&&m.uc_editor.state.item("editing")?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[f.type+"s"].currently_editing+"</p>"):(v("button#uc_classic_editor-tmce").trigger("click"),t=tinyMCE.activeEditor.getContent(),t=m.adjust_local_reference(t),m.uc_editor.edits.bulk_update({id:s.ID,title:e.find("div.title-container input#title").val(),content:t,source:"classic"}),"publish"!=i.toLowerCase()||m.uc_editor.state.exists("save_draft_pending")||m.uc_editor.edits.update("status","publish"),m.is_input_future_date()&&m.uc_editor.edits.update("status","future"),m.uc_editor.edits.exists("featured_media")&&m.uc_editor.edits.update("featured_media",parseInt(v("input#_thumbnail_id").val())),e={name:"save",arguments:m.uc_editor.edits.get_collection_object()},(n=v(document.body)).append('<div class="modal-backdrop-container"><div class="modal-backdrop fade show"></div><div class="updraftcentral_spinner"></div></div>'),l(e,$site_row).then(function(t){var e,i,a;void 0!==t.post&&t.post?(e={post:JSON.parse(t.post),misc:t.misc},"post"==f.type&&void 0!==t.preloaded&&t.preloaded&&(a=JSON.parse(t.preloaded),void 0!==(i=m.manage_data.item("preloaded_data"))&&i&&((i=JSON.parse(i)).categories=a.categories,i.tags=a.tags,m.manage_data.update("preloaded_data",JSON.stringify(i)))),"manage"===m.current_section&&g(e,s.post_status),m.load_updraftcentral_editor("classic",e,$site_row),t.hasOwnProperty("options")&&y(t.options)):(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[f.type+"s"].unkown_error+"</p>"),void 0!==(a=n.find("div.modal-backdrop-container"))&&a.length&&a.remove())}).always(function(){m.uc_editor.state.remove("save_draft_pending")}))}),v("#uc-editor-buttons > button#uc-editor-close").on("click",function(){var t,e=v(document.body).find("div#classic_editor_container");void 0!==e&&e&&(m.uc_editor.state.exists("editing")&&m.uc_editor.state.item("editing")?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[f.type+"s"].currently_editing+"</p>"):(e.remove(),v(".updraftcentral_spinner").is(":visible")&&v(".updraftcentral_spinner").remove(),"undefined"!=typeof tinymce&&tinymce&&(t=tinymce.activeEditor.id,tinymce.EditorManager.execCommand("mceRemoveEditor",!0,t),tinymce.EditorManager.execCommand("mceRemoveControl",!0,t)),v(document.body).trigger("updraftcentral_"+f.type+"_editor_closed",[e])))}),v("#uc-editor-buttons > button#uc-switch-draft").on("click",function(){m.uc_editor.edits.update("status","draft"),v("div#submitpost div#publishing-action input#publish").trigger("click")}),v("#edit-slug-box span#edit-slug-buttons > button.edit-slug").on("click",function(){var t,i=v("#edit-slug-box span#editable-post-name"),a=i.closest("a");a.attr("onclick","return false;"),a.attr("target","_blank"),void 0!==i&&i&&(m.uc_editor.state.update("editing",!0),t=v("<input/>",{type:"text",id:"uc-input-slug",class:"editable-slug",value:v("span#editable-post-name-full").html()}),i.html(t),v(this).hide(),(t=v("<button/>",{text:udclion[f.type+"s"].ok,id:"uc-btn-ok",class:"uc-slug-buttons"})).on("click",function(){var t,e=i.find("input#uc-input-slug");void 0!==e&&e&&(0==(t=e.val()).trim().length?UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[f.type+"s"].slug_missing+"</p>"):(v("span#editable-post-name-full").html(t),e.remove(),i.html(t),a.attr("href",a.text()),a.removeAttr("onclick"),m.uc_editor.edits.update("slug",t),m.uc_editor.state.remove("editing"),v("#edit-slug-box span#edit-slug-buttons > button#uc-btn-ok").remove(),v("#edit-slug-box span#edit-slug-buttons > button#uc-btn-cancel").remove(),v("#edit-slug-box span#edit-slug-buttons > button.edit-slug").show()))}),v("#edit-slug-box span#edit-slug-buttons").append(t),(t=v("<button/>",{text:udclion[f.type+"s"].cancel,id:"uc-btn-cancel",class:"uc-slug-buttons"})).on("click",function(){var t=i.find("input#uc-input-slug");void 0!==t&&t&&(t.remove(),i.html(v("span#editable-post-name-full").html()),a.removeAttr("onclick"),m.uc_editor.state.remove("editing"),v("#edit-slug-box span#edit-slug-buttons > button#uc-btn-ok").remove(),v("#edit-slug-box span#edit-slug-buttons > button#uc-btn-cancel").remove(),v("#edit-slug-box span#edit-slug-buttons > button.edit-slug").show())}),v("#edit-slug-box span#edit-slug-buttons").append(t))}),v("#classic-editor-dashboard div#submitdiv").find("a.button, a.button-cancel").not("a#post-preview").addClass("btn btn-secondary"),v("div#classic_editor a.edit-post-status").attr("href","#misc-publishing-actions"),v("div#classic_editor a.edit-post-status").on("click",function(t){v(this).hide(),v("div#post-status-select").slideDown("fast")}),v("div#post-status-select a.save-post-status").on("click",function(t){var e=v(this).closest("div#post-status-select").find("select#post_status").val();switch(m.uc_editor.edits.update("status",e),v(this).siblings("a.cancel-post-status").trigger("click"),e){case"pending":v("div#submitpost input#save-post").val(udclion[f.type+"s"].save_as_pending).show(),status_text=udclion[f.type+"s"].pending_review;break;case"draft":v("div#submitpost input#save-post").val(udclion[f.type+"s"].save_draft).show(),status_text=udclion[f.type+"s"].draft;break;case"publish":v("div#submitpost input#save-post").hide(),status_text=udclion[f.type+"s"].published}v("div#misc-publishing-actions span#post-status-display").html(status_text),"future"!==s.post_status&&m.is_input_future_date()&&v("div#submitpost input#publish").val(udclion[f.type+"s"].schedule)}),v("div#post-status-select a.cancel-post-status").on("click",function(t){v("div#post-status-select").slideUp("fast","swing",function(){v("div#classic_editor a.edit-post-status").show()})}),v("div#classic_editor a.edit-visibility").on("click",function(t){v(this).hide(),"post"==f.type&&(v("div#post-visibility-select input#visibility-radio-public").is(":checked")?v("div#post-visibility-select span#sticky-span").show():v("div#post-visibility-select span#sticky-span").hide()),v("div#post-visibility-select input#visibility-radio-password").is(":checked")?v("div#post-visibility-select span#password-span").show():v("div#post-visibility-select span#password-span").hide(),v("div#post-visibility-select").slideDown("fast")}),v("div#post-visibility-select span#sticky-span input#sticky").on("click",function(t){m.uc_editor.edits.update("sticky",!!v(this).is(":checked"))}),v("div#post-visibility-select a.save-post-visibility").on("click",function(t){var e=v(this).closest("div#post-visibility-select"),i=e.find('input[name="visibility"]:checked').val();if(m.uc_editor.edits.update("visibility",i),"private"==i)v("div#submitpost input#publish").val(udclion[f.type+"s"].update),v("div#misc-publishing-actions span#post-status-display").html(udclion[f.type+"s"].privately_published),v("div#misc-publishing-actions a.edit-post-status").hide(),v("div#submitpost input#save-post").hide();else{if(-1===v.inArray(s.post_status,["publish","future"])?v("div#submitpost input#publish").val(udclion[f.type+"s"].publish):"future"!==s.post_status&&m.is_input_future_date()?v("div#submitpost input#publish").val(udclion[f.type+"s"].schedule):v("div#submitpost input#publish").val(udclion[f.type+"s"].update),"password"==i){e=e.find("input#post_password").val();if(0==e.trim().length)return void UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[f.type+"s"].password_missing+"</p>");m.uc_editor.edits.update("password",e)}switch(m.uc_editor.edits.exists("status")?m.uc_editor.edits.item("status"):s.post_status){case"pending":status_text=udclion[f.type+"s"].pending_review;break;case"draft":status_text=udclion[f.type+"s"].draft;break;case"publish":status_text=udclion[f.type+"s"].published;break;default:status_text=udclion[f.type+"s"].published,v('#post-status-select select#post_status option[value="publish"]').prop("selected",!0).html(status_text)}v("div#misc-publishing-actions a.edit-post-status").show(),v("div#misc-publishing-actions span#post-status-display").html(status_text),v("div#post-status-select a.save-post-status").trigger("click")}switch(i){case"public":visibility_text=udclion[f.type+"s"].public,v("div#post-visibility-select span#sticky-span input#sticky").is(":checked")&&(visibility_text+=", "+udclion[f.type+"s"].sticky);break;case"password":visibility_text=udclion[f.type+"s"].password_protected;break;case"private":visibility_text=udclion[f.type+"s"].private}v("div#misc-publishing-actions span#post-visibility-display").html(visibility_text),v(this).siblings("a.cancel-post-visibility").trigger("click")}),v("div#post-visibility-select a.cancel-post-visibility").on("click",function(t){v("div#post-visibility-select").slideUp("fast","swing",function(){v("div#classic_editor a.edit-visibility").show()})}),v("div#post-visibility-select input#visibility-radio-password").on("click",function(t){"post"==f.type&&v("div#post-visibility-select span#sticky-span").hide(),v("div#post-visibility-select span#password-span").show()}),v("div#post-visibility-select").on("click","input#visibility-radio-public, input#visibility-radio-private",function(t){"post"==f.type&&("visibility-radio-public"===v(this).attr("id")?v("div#post-visibility-select span#sticky-span").show():v("div#post-visibility-select span#sticky-span").hide()),v("div#post-visibility-select span#password-span").hide()}),v("div#classic_editor a.edit-timestamp").on("click",function(t){v(this).hide(),v("fieldset#timestampdiv").slideDown("fast");var e=m.uc_editor.edits.item("timestamp"),i=void 0!==e&&void 0!==e.month?e.month:r.published_date.mm,a=void 0!==e&&void 0!==e.day?e.day:r.published_date.jj,n=void 0!==e&&void 0!==e.year?e.year:r.published_date.aa,s=void 0!==e&&void 0!==e.hour?e.hour:r.published_date.hh,o=void 0!==e&&void 0!==e.minute?e.minute:r.published_date.mn,e=void 0!==e&&void 0!==e.second?e.second:r.published_date.ss;v("#timestampdiv select#mm").val(i),v("#timestampdiv input#jj").val(a),v("#timestampdiv input#aa").val(n),v("#timestampdiv input#hh").val(s),v("#timestampdiv input#mn").val(o),v("#timestampdiv input#ss").val(e)}),v("fieldset#timestampdiv a.save-timestamp").on("click",function(t){var e=v(this).closest("fieldset#timestampdiv"),i=e.find("div.timestamp-wrap"),i={month:i.find("select#mm").val(),day:i.find("input#jj").val(),year:i.find("input#aa").val(),hour:i.find("input#hh").val(),minute:i.find("input#mn").val(),second:e.find("input#ss").val()};m.validate_input_date(i)?(e=m.prepare_date(i),v("div#misc-publishing-actions span#timestamp > b").html(e.formatted),m.uc_editor.edits.update("date",e.date),m.uc_editor.edits.update("timestamp",e.timestamp),v(this).siblings("a.cancel-timestamp").trigger("click"),"future"!==s.post_status&&m.is_input_future_date()&&v("div#submitpost input#publish").val(udclion[f.type+"s"].schedule)):UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[f.type+"s"].invalid_date_input+"</p>")}),v("fieldset#timestampdiv a.cancel-timestamp").on("click",function(t){v("fieldset#timestampdiv").slideUp("fast","swing",function(){v("div#classic_editor a.edit-timestamp").show()})}),v("div#postimagediv").on("click","a#set-post-thumbnail",function(t){var e=v("#insert-media-button");(e=void 0!==e&&0!=e.length?e:v("button.insert-media")).trigger("click",["featured_image"])}),v(".wp-media-buttons").on("click","#insert-media-button, button.insert-media",function(t,e){var a,n;a=void 0!==e,n=setInterval(function(){var t,e,i=v("div[id^='__wp-uploader'].supports-drag-drop");void 0!==i&&i.length&&(clearInterval(n),t=i.find(".media-frame"),a?(void 0!==(e=0==(e=i.find(".media-menu-item:contains('"+udclion[f.type+"s"].featured_image+"')")).length?i.find("#menu-item-featured-image"):e)&&e.length&&(e.trigger("click"),(e=i.find(".media-menu-item:contains('"+udclion[f.type+"s"].media_library+"')")).length&&!e.hasClass("active")&&e.trigger("click")),t.find("div.media-frame-menu").hide(),t.find(".media-frame-menu-heading").hide(),t.find("div[class^='media-frame-']").not(".media-frame-menu").css("left","0")):(void 0!==(e=0==(e=i.find(".media-menu-item:contains('"+udclion[f.type+"s"].add_media+"')")).length?i.find("#menu-item-insert"):e)&&e.length&&e.trigger("click"),t.find("div[class^='media-frame-']").not(".media-frame-menu").css("left","200px"),t.find(".media-frame-menu-heading").show(),t.find("div.media-frame-menu").show()))},100)}),v("div#postimagediv").on("click","a#remove-post-thumbnail",i),v(document).on("click","button.media-button-select",function(t){var i=setInterval(function(){var t=v("#postimagediv img.attachment-post-thumbnail"),e=v("div#postimagediv a#remove-post-thumbnail").attr("href");void 0!==t&&t.length&&"#"==e&&(clearInterval(i),v("div#postimagediv a#remove-post-thumbnail").attr("href","#set-post-thumbnail"),m.uc_editor.edits.update("featured_media",v("input#_thumbnail_id").val()))},100)}),"post"==f.type&&(v("#categorydiv a#category-add-toggle").on("click",function(t){v("div#category-adder p#category-add").show()}),v("a#link-post_tag").on("click",function(t){var e=v("div#mostused-post_tag").html().trim();0==e.length&&e!==udclion.posts.no_tags_found&&v("div#mostused-post_tag").html(udclion.posts.no_tags_found),v("div#mostused-post_tag").is(":visible")?v("div#mostused-post_tag").hide():v("div#mostused-post_tag").show()}),v("div.categorydiv").on("click",'ul#categorychecklist input[type="checkbox"], ul#categorychecklist-pop input[type="checkbox"]',function(){var t=v(this).val();switch(v(this).closest(".categorychecklist").attr("id")){case"categorychecklist":v('ul#categorychecklist-pop li input[value="'+t+'"]').prop("checked",v(this).is(":checked"));break;case"categorychecklist-pop":v('ul#categorychecklist li input[value="'+t+'"]').prop("checked",v(this).is(":checked"))}var e=[];v('#categorychecklist li > label.selectit > input[type="checkbox"]').each(function(){v(this).is(":checked")&&e.push(v(this).val())}),m.uc_editor.edits.update("categories",e)}),v("div.categorydiv input#category-add-submit").on("click",function(){var t,e,i=v("input#newcategory"),a=v("select#newcategory_parent");void 0!==i.val()&&i.val().length?(t=i.val().trim(),t=a.val().length?a.val()+":"+t:t,v("#categorychecklist").prepend('<li id="category-0" class="popular-category"><label class="selectit"><input value="'+t+'" type="checkbox" name="post_category[]" id="in-category-0" checked="checked"> '+i.val()+"</label></li>"),i.val(""),a.val(""),v(this).closest("p#category-add").hide(),e=[],v('#categorychecklist li > label.selectit > input[type="checkbox"]').each(function(){v(this).is(":checked")&&e.push(v(this).val())}),m.uc_editor.edits.update("categories",e)):UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion.posts.need_category_to_add+"</p>")}),v("#tagsdiv-post_tag input.tagadd").on("click",function(){var t=v("#tagsdiv-post_tag input#new-tag-post_tag");if(void 0!==t.val()&&t.val().length){for(var e=[t.val()],i=(-1!==t.val().indexOf(",")&&(e=t.val().split(",")),[]),a=(v("#tagsdiv-post_tag .tagchecklist > span").each(function(){i.push(v(this).text().trim())}),v("#tagsdiv-post_tag .tagchecklist")),n=a.find("> span").length,s=0;s<e.length;s++){var o=e[s].trim();m.is_ivalue_exists(o,i)||(a.append('<span><button type="button" id="post_tag-check-num-'+n+'" class="ntdelbutton"><span class="remove-tag-icon" aria-hidden="true"></span></button>&nbsp;'+o+"</span>"),a.find("#post_tag-check-num-"+n).on("click",function(){v(this).parent().remove();var t=[];v("#tagsdiv-post_tag .tagchecklist > span").each(function(){t.push(v(this).text().trim())}),m.uc_editor.edits.update("tags",t)}),i.push(o),n++)}t.val(""),m.uc_editor.edits.update("tags",i)}else UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion.posts.need_something_to_add+"</p>")}),v("#tagsdiv-post_tag .tagchecklist button.ntdelbutton").on("click",function(){v(this).parent().remove();var t=[];v("#tagsdiv-post_tag .tagchecklist > span").each(function(){t.push(v(this).text().trim())}),m.uc_editor.edits.update("tags",t)}),v("#tagsdiv-post_tag #mostused-post_tag a").each(function(){v(this).attr("href","javascript://")}),v("#tagsdiv-post_tag #mostused-post_tag a").on("click",function(){var t=[],e=(m.uc_editor.edits.exists("tags")?t=m.uc_editor.edits.item("tags"):v("#tagsdiv-post_tag .tagchecklist > span").each(function(){t.push(v(this).text().trim())}),v("#tagsdiv-post_tag .tagchecklist")),i=e.find("> span").length,a=v(this).text().replace(/\(\d\)/gi,"").trim();m.is_ivalue_exists(a,t)||(e.append('<span><button type="button" id="post_tag-check-num-'+i+'" class="ntdelbutton"><span class="remove-tag-icon" aria-hidden="true"></span></button>&nbsp;'+a+"</span>"),e.find("#post_tag-check-num-"+i).on("click",function(){v(this).parent().remove();var t=[];v("#tagsdiv-post_tag .tagchecklist > span").each(function(){t.push(v(this).text().trim())}),m.uc_editor.edits.update("tags",t)}),t.push(a),m.uc_editor.edits.update("tags",t))}),v("#categorydiv a#uc_tab_category_all").on("click",function(t){v("#categorydiv a#uc_tab_category_all").closest("li").toggleClass("tabs"),v("#categorydiv a#uc_tab_category_pop").closest("li").toggleClass("tabs"),v("div#category-pop").hide(),v("div#category-all").show()}),v("#categorydiv a#uc_tab_category_pop").on("click",function(t){v("div#category-all ul#categorychecklist li input:checked").each(function(){var t=v(this).val();v('div#category-pop ul#categorychecklist-pop li input[value="'+t+'"]').prop("checked",!0)}),v("#categorydiv a#uc_tab_category_all").closest("li").toggleClass("tabs"),v("#categorydiv a#uc_tab_category_pop").closest("li").toggleClass("tabs"),v("div#category-all").hide(),v("div#category-pop").show()})),v('#uc-page-attributes-container select[name="parent_id"]').on("change",function(t){m.uc_editor.edits.update("parent",v(this).val())}),v('#uc-page-attributes-container select[name="page_template"]').on("change",function(t){m.uc_editor.edits.update("template",v(this).val())}),v('#uc-page-attributes-container input[name="menu_order"]').on("change",function(t){d(0,v(this),"order",!0,!0)})},500)}else console.log(udclion[f.type+"s"].unable_to_load_editor)}function y(t){var e;void 0!==t&&t&&(e={date_filter:t.date},"post"==f.type&&(e.category_filter=t.category),t=UpdraftCentral.template_replace(f.type+"s-manage-filters",e),e=v("<div/>",{class:"hidden"}).html(t).find("select.uc-"+f.type+"-date-filter"),v(".uc-"+f.type+"-buttons-filters select.uc-"+f.type+"-date-filter").replaceWith(e),"post"==f.type&&(e=v("<div/>",{class:"hidden"}).html(t).find("select.uc-post-category-filter"),v(".uc-post-buttons-filters select.uc-post-category-filter").replaceWith(e)))}function i(t){t.preventDefault();t=v(this).closest(".inside");t.find("#set-post-thumbnail-desc").remove(),t.find("#set-post-thumbnail").removeAttr("aria-describedby").html(udclion[f.type+"s"].set_featured_image),t.find("input#_thumbnail_id").val(0),v(this).parent().remove(),m.uc_editor.edits.update("featured_media",0)}function k(){var t,e=UpdraftCentral.$site_row.data("admin_url"),i=0,a=setInterval(function(){(t=void 0!==(t=v(".edit-post-fullscreen-mode-close__toolbar > a"))&&null!=t&&0!=t.length?t:v("a.edit-post-fullscreen-mode-close")).length?(clearInterval(a),"#"!==t.attr("href")&&(redirect_url=e+t.attr("href"),t.attr("href","#").removeAttr("target").attr("onclick",'UpdraftCentral_Library.open_browser_at(UpdraftCentral.$site_row, { module: "direct_url", url: "'+redirect_url+"\" }, jQuery('#updraftcentral_dashboard_wrapper'));"))):60<i&&clearInterval(a),i++},1e3)}function u(t,a,e){var i,n,s=a.find(".updraftcentral_row_extracontents");void 0!==t[f.type+"s"]&&t[f.type+"s"]&&((0===s.find(".uc-navlinks-container").length||void 0!==e&&e)&&(i={date_filter:t.options.date},"post"==f.type&&(i.category_filter=t.options.category),i=UpdraftCentral.template_replace(f.type+"s-manage-filters",i),n=UpdraftCentral.template_replace(f.type+"s-items",{}),s.html(i+n),s.find("input.uc-"+f.type+"-check-all").on("click",function(t){var e=v(this),i=a;i=i.find(".uc-"+f.type+"-items-container .uc-"+f.type+"-item"),e.is(":checked")&&i.length?i.find('input[name="post[]"]').prop("checked",!0):i.find('input[name="post[]"]').prop("checked",!1)})),void 0!==e&&e&&(m.current_group="all",r(m.current_group),v("ul#uc-navlinks a.uc-navlink-item").css("cssText","font-weight: normal;"),v('ul#uc-navlinks a.uc-navlink-item[data-group="'+m.current_group+'"]').css("cssText","font-weight: bold !important;")),m.pagination.set_remote_data({info:t.info,items:t[f.type+"s"]}),p(1,a),_(t[f.type+"s_count"]),UpdraftCentral_Library.enable_actions())}function o(a,t,n,e,i,s,o,r){t={name:"get",arguments:{numberposts:c,paged:void 0!==t&&t?t:1,status:void 0!==n&&n?n:"all",keyword:void 0!==e&&e?e:"",date:void 0!==i&&i?i:"",timeout:void 0!==udclion.user_defined_timeout&&udclion.user_defined_timeout?udclion.user_defined_timeout:30}};"post"==f.type&&(t.arguments.category=void 0!==s&&s?s:""),void 0!==r&&r&&(t.arguments.preload=1),UpdraftCentral_Library.disable_actions(),l(t,a).then(function(t){var e,i;void 0!==n&&n&&v('ul#uc-navlinks a.uc-navlink-item[data-group="'+n+'"]').css("cssText","font-weight: bold !important;"),t.hasOwnProperty(f.type+"s")&&t[f.type+"s"]&&(m.manage_data.update("response",t),t.hasOwnProperty("preloaded")&&t.preloaded&&(m.manage_data.update("preloaded_data",t.preloaded),e=JSON.parse(t.preloaded),i=a.data("site_id"),e.hasOwnProperty("wp_version")&&e.wp_version&&(m.wp_versions.exists(i)||m.wp_versions.add(i,e.wp_version))),t.hasOwnProperty("options")&&t.options&&("page"==f.type&&!m.manage_data.exists("parent_options")&&t.options.hasOwnProperty("page")&&m.manage_data.add("parent_options",t.options.page),!m.manage_data.exists("template_options")&&t.options.hasOwnProperty("template")&&m.manage_data.add("template_options",t.options.template))),u(t,a,o=void 0!==o&&o)})}function d(t,e,i,a,n){var s=!0,o=e.val();return void 0!==a&&a&&(UpdraftCentral_Library.is_numeric(o)||(s=!1)),0!=o.trim().length&&s?(m.dirty_edits.remove(i),(void 0!==n&&n?m.uc_editor.edits:m.quick_edits).update(i,o),!0):(m.dirty_edits.update(i,1),UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+sprintf(udclion[f.type+"s"].invalid_missing_value,i)+"</p>",function(){setTimeout(function(){e.trigger("focus")},500)}),!1)}function r(t){var e=v(".uc-"+f.type+"-buttons-filters select.uc-"+f.type+"-action");switch(t){case"publish":e.find('option[value="publish"], option[value="restore"], option[value="delete"]').hide(),e.find('option[value="draft"], option[value="trash"]').show();break;case"private":case"draft":case"pending":e.find('option[value="draft"], option[value="restore"], option[value="delete"]').hide(),e.find('option[value="trash"], option[value="publish"]').show();break;case"trash":e.find('option[value="draft"], option[value="trash"], option[value="publish"]').hide(),e.find('option[value="restore"], option[value="delete"]').show();break;default:e.find('option[value="draft"], option[value="publish"], option[value="restore"], option[value="delete"]').hide(),e.find('option[value="trash"]').show()}}function l(t,e){var n=v.Deferred();return UpdraftCentral.send_site_rpc(f.type+"s."+t.name,t.arguments,e,function(t,e,i){var a;UpdraftCentral.ajax_request_processing=!1,"ok"!==e||void 0===t.data||null===t.data||t.data.error?(void 0!==t.data&&t.data&&void 0!==t.data.error&&(e="",void 0!==udclion.plugin[t.data.message]?(e=udclion.plugin[t.data.message],void 0!==t.data.values&&Array.isArray(t.data.values)&&(e=vsprintf(e,t.data.values))):void 0!==udclion[t.data.message]?(e=udclion[t.data.message],void 0!==t.data.values&&Array.isArray(t.data.values)&&(e=vsprintf(e,t.data.values))):(a=t.data.message,void 0!==t.data.messages&&t.data.messages.length&&(a=t.data.messages[0]),e=sprintf(udclion.plugin.general_error,a)),UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+e+"</p>")),n.reject(t)):n.resolve(t.data)},e,90),n.promise()}function b(t,e,i,a){var n="";if(void 0!==t&&t)for(var s,o=0;o<t.length;o++)if(s=t[o],void 0!==e&&e&&(void 0===a||!Array.isArray(a)||!a.length||-1===v.inArray(s[e.value],a)))if(void 0!==i&&i)switch(i){case"categories":n+='<li id="category-'+s[e.value]+'"><label><input id="in-category-'+s[e.value]+'" type="checkbox" name="post_category[]" value="'+s[e.value]+'" /> '+s[e.label]+"</label></li>";break;case"tags":n+=0==o?s[e.label]:", "+s[e.label]}else n+='<option value="'+s[e.value]+'">'+s[e.label]+"</option>";return n}function p(t,e){var t=m.pagination.get_data(t),i=e.find(".updraftcentral_row_extracontents"),a=m.manage_data.item("response"),n={template:b(a.options.template,{value:"filename",label:"template"}),page:b(a.options.page,{value:"id",label:"title"}),author:b(a.options.author,{value:"id",label:"name"})},a=("post"==f.type&&(n.category=b(a.options.category,{value:"id",label:"name"},"categories"),n.tag=b(a.options.tag,{value:"id",label:"name"},"tags")),{options:n,posts:t.items}),n=UpdraftCentral.template_replace(f.type+"s-items",a),t=(i.find(".uc-"+f.type+"-items-container").html(n),e);if((t=t.find(".updraftcentral_row_extracontents")).find(".row.uc-"+f.type+"-item:even").addClass("uc-"+f.type+"-item-even"),t.find(".row.uc-"+f.type+"-item:odd").addClass("uc-"+f.type+"-item-odd"),"post"==f.type)for(var s=[".post-item-categories",".post-item-tags"],o=0;o<s.length;o++)v(".uc-post-item "+s[o]).each(function(){var t,e="",i=v(this).html().trim();if(i.length&&-1!==i.indexOf(",")){if(5<(t=i.split(",")).length){for(var a=0;a<5;a++)e+=0==a?t[a]:", "+t[a];e+="..."}e.length&&v(this).html(e)}});m.pagination.render(),i=(a=e).find(".updraftcentral_row_extracontents"),a=a.data("site_id"),m.wp_versions.exists(a)?(a=m.wp_versions.item(a),parseInt(a)<5&&i.find("a."+f.type+'-action-item[data-action="edit-gutenberg"]').remove()):i.find("a."+f.type+'-action-item[data-action="edit-gutenberg"]').remove()}function _(t){var e;void 0!==t&&t&&((e=v("div.uc-navlinks-container ul#uc-navlinks")).find("li.all span.count").html("("+t.all+")"),e.find("li.publish span.count").html("("+t.publish+")"),e.find("li.private span.count").html("("+t.private+")"),e.find("li.draft span.count").html("("+t.draft+")"),e.find("li.pending span.count").html("("+t.pending+")"),e.find("li.future span.count").html("("+t.future+")"),e.find("li.trash span.count").html("("+t.trash+")"))}this.init=function(){v(document.body).on("click","div.media-modal li.attachment",function(){m.set_selected_image(v(this))}),v(document.body).on("mouseover",".components-notice-list",function(){v(this).find("a.components-notice__action.is-link").attr("target","_blank")}),v(document.body).on("click",'input[name="uc-dont-show-again"]',function(){"undefined"!=typeof localStorage&&localStorage&&(v(this).is(":checked")?localStorage.setItem("uc-gutenberg-dialog-no-show",1):localStorage.removeItem("uc-gutenberg-dialog-no-show"))}),v(document.body).on("click","label.uc-dont-show-again-label",function(){v(this).siblings('input[name="uc-dont-show-again"]').trigger("dblclick")}),v(document).on("keyup",function(t){27!==(t.keyCode||t.which)&&"Escape"!==t.key||v("#updraftcentral_dashboard").is(":visible")||v("#updraftcentral_dashboard").show()}),v("#updraftcentral_dashboard").on("updraftcentral_dialog_opened",function(){v.fullscreen.isFullScreen()&&v("#classic_editor_container").is(":visible")&&(v(".bootbox.modal").appendTo("#classic_editor_container"),v(".modal-backdrop-container").appendTo("#classic_editor_container"))}),v("#updraftcentral_dashboard").on("editor-has-recovered",function(){m.apply_subscriptions_observer(m.reset_info.data,m.reset_info.previous_status,m.reset_info.location),m.clear_notices()}),v(document.body).on("fullscreenchange",function(){var t,e;v.fullscreen.isFullScreen()||(t=v(document.body).find("div#classic_editor_container"),e=v(document.body).find("div#gutenberg_editor_container"),"undefined"!=typeof($container=t.is(":visible")?t:e)&&$container.length&&$container.is(":visible")&&(void 0!==(e=v("#updraftcentral_dashboard").parent().find("#"+$container.attr("id")))&&e.length&&(v("#updraftcentral_dashboard").parent().removeAttr("style"),e.removeAttr("style"),e.appendTo(document.body),t.is(":visible")&&"undefined"!=typeof tinymce&&tinymce&&m.init_tiny_mce("uc_classic_editor"),m.unload_remote_editor_styles(),m.load_remote_editor_styles($container))))}),v(document.body).on("mouseover","div."+f.type+"-item-title",function(){v(this).find("div."+f.type+"-actions").show()}).on("mouseout",function(){v(this).find("div."+f.type+"-actions").hide()}),v(".updraftcentral-show-in-tab-"+f.type+"s button.updraftcentral_action_choose_another_site").on("click",function(){m.editor_reload_required=!0}),v(document.body).on("updraftcentral_"+f.type+"_editor_loaded",function(t,e){v(document.body).addClass("uc-editor-loaded"),m.load_remote_editor_styles(e),v.fullscreen.isFullScreen()&&void 0!==e&&e.length&&e.appendTo(v("#updraftcentral_dashboard").parent()),m.listen_for_fullscreen_resources(),v("#updraftcentral_dashboard").hide()}),v(document.body).on("updraftcentral_"+f.type+"_editor_closed",function(t,e){v(document.body).removeClass("uc-editor-loaded"),m.unload_remote_editor_styles(),v.fullscreen.isFullScreen()||void 0===e||!e.length||void 0!==(e=v("#updraftcentral_dashboard").parent().find("#"+e.attr("id")))&&e.length&&e.appendTo(document.body),UpdraftCentral.unsubscribe_to_node_changes("uc_body_resources"),v("#updraftcentral_dashboard").show(),UpdraftCentral.clear_editor_container(null)})},this.register_module_handlers=function(){UpdraftCentral.register_row_clicker("input.uc-"+f.type+"-search-"+f.type+"s",function(t,e,i){var a,n,s;13===i.which&&(i=v(this).val(),n=v("select.uc-"+f.type+"-date-filter").val(),a="post"==f.type?v("select.uc-"+f.type+"-category-filter").val():null,s=null,n&&(s=(n=new Date(n.replace(" "," 1, "))).getMonth()+1+":"+n.getFullYear()),o(t,null,m.current_group,i,s,a))},!0,"keyup"),UpdraftCentral.register_row_clicker("button#uc-apply-action",function(e){var t,i=v(".uc-"+f.type+"-buttons-filters select.uc-"+f.type+"-action").val(),a=[];e.find(".uc-"+f.type+"-items-container .uc-"+f.type+"-item").each(function(){var t=v(this),e=t.data("id");t.find('input[name="post[]"]').is(":checked")&&a.push(e)}),a.length&&((t={name:"set_state",arguments:{list:a,action:i,paged:1,status:"all"}}).arguments["number"+f.type+"s"]=c,l(t,e).then(function(t){void 0!==t[f.type+"s"]&&t[f.type+"s"]?(t.hasOwnProperty("get")&&t.get&&(m.manage_data.update("response",t.get),u(t.get,e,!0)),v(".uc-"+f.type+"-buttons-filters select.uc-"+f.type+'-action > option[value="'+i+'"]').text(),UpdraftCentral_Library.dialog.alert("<h2>"+udclion[f.type+"s"].post_update_heading+"</h2><p>"+udclion[f.type+"s"].action_messages[i]+"</p>")):UpdraftCentral_Library.dialog.alert("<h2>"+udclion[f.type+"s"].post_update_heading+"</h2><p>"+udclion[f.type+"s"].unkown_error+"</p>")}))}),UpdraftCentral.register_row_clicker("select.uc-post-category-filter",function(t){var e=v(this).val(),i=v("select.uc-post-date-filter").val(),a=null,i=(i&&(a=(i=new Date(i.replace(" "," 1, "))).getMonth()+1+":"+i.getFullYear()),v("input.uc-post-search-posts").val());o(t,null,m.current_group,i,a,e)},!0,"change"),UpdraftCentral.register_row_clicker("select.uc-"+f.type+"-date-filter",function(t){var e=v(this).val(),i="post"==f.type?v("select.uc-"+f.type+"-category-filter").val():null,a=null,e=(e&&(a=(e=new Date(e.replace(" "," 1, "))).getMonth()+1+":"+e.getFullYear()),v("input.uc-"+f.type+"-search-"+f.type+"s").val());o(t,null,m.current_group,e,a,i)},!0,"change"),UpdraftCentral.register_row_clicker("ul#uc-navlinks a.uc-navlink-item",function(t){var e=v(this).data("group");r(m.current_group=e),v("ul#uc-navlinks a.uc-navlink-item").css("cssText","font-weight: normal;"),v('ul#uc-navlinks a.uc-navlink-item[data-group="'+e+'"]').css("cssText","font-weight: bold !important;"),v("input.uc-"+f.type+"-search-"+f.type+"s").val(""),v("select.uc-"+f.type+"-date-filter").val(""),"post"==f.type&&v("select.uc-"+f.type+"-category-filter").val(""),o(t,null,e)}),UpdraftCentral.register_row_clicker(".uc-"+f.type+"-items-container a."+f.type+'-action-item[data-action="quick-edit"]',function(t){var e,i=v("div.uc_quick_edit:visible"),i=(i.length&&i.find("button.cancel").trigger("click"),v(this).data("id")),a=v("div#"+f.type+"-quick-edit-"+i),n=a.data("author"),s=a.data("parent"),o=a.data("template"),r=(v("div#"+f.type+"-item-"+i).hide(),a.show(),"post"==f.type&&a.find("div.category-checklist-wrapper").scrollTop(0),m.quick_edits.clear(),m.dirty_edits.clear(),a);void 0!==r&&r&&(e=r.data("id"),r.find(".uc-"+f.type+'-title input[name="post_title"]').off("change").on("change",function(){d(0,v(this),"title")}),r.find(".uc-"+f.type+'-slug input[name="post_name"]').off("change").on("change",function(){d(0,v(this),"slug")}),r.find(".uc-"+f.type+'-date select[name="mm"]').off("change").on("change",function(){m.quick_edits.update("mm",v(this).val())}),r.find(".uc-"+f.type+'-date input[name="jj"]').off("change").on("change",function(){d(0,v(this),"jj",!0)}),r.find(".uc-"+f.type+'-date input[name="aa"]').off("change").on("change",function(){d(0,v(this),"aa",!0)}),r.find(".uc-"+f.type+'-date input[name="hh"]').off("change").on("change",function(){d(0,v(this),"hh",!0)}),r.find(".uc-"+f.type+'-date input[name="mn"]').off("change").on("change",function(){d(0,v(this),"mn",!0)}),r.find(".uc-"+f.type+'-author select[name="post_author"]').off("change").on("change",function(){m.quick_edits.update("author",v(this).val())}),r.find(".uc-"+f.type+'-password input[name="post_password"]').off("change").on("change",function(){d(0,v(this),"password")?m.quick_edits.update("visibility","password"):v(".uc-"+f.type+'-password input[name="keep_private"]').is(":checked")||m.quick_edits.update("visibility","public")}),r.find(".uc-"+f.type+'-password input[name="keep_private"]').off("click").on("click",function(){v(this).is(":checked")?m.quick_edits.update("visibility","private"):0==v(".uc-"+f.type+'-password input[name="post_password"]').val().length&&m.quick_edits.update("visibility","public")}),r.find(".uc-"+f.type+'-parent select[name="post_parent"]').off("change").on("change",function(){m.quick_edits.update("parent",v(this).val())}),r.find(".uc-"+f.type+'-order input[name="post_order"]').off("change").on("change",function(){d(0,v(this),"order",!0)}),r.find(".uc-"+f.type+'-order input[name="menu_order"]').off("change").on("change",function(){d(0,v(this),"order",!0)}),r.find(".uc-"+f.type+'-template select[name="post_template"]').off("change").on("change",function(){m.quick_edits.update("template",v(this).val())}),r.find(".uc-"+f.type+'-comment-ping input[name="comment_status"]').off("click").on("click",function(){var t=v(this).is(":checked")?"open":"closed";m.quick_edits.update("comment_status",t)}),r.find(".uc-"+f.type+'-comment-ping input[name="ping_status"]').off("click").on("click",function(){var t=v(this).is(":checked")?"open":"closed";m.quick_edits.update("ping_status",t)}),r.find(".uc-"+f.type+'-status select[name="status"]').off("change").on("change",function(){m.quick_edits.update("status",v(this).val())}),r.find('.uc-post-sticky input[name="sticky"]').off("click").on("click",function(){var t=v(this).is(":checked")?1:0;m.quick_edits.update("sticky",t)}),r.find('ul#category-checklist input[type="checkbox"]').off("click").on("click",function(){var t=[];r.find('ul#category-checklist input[type="checkbox"]:checked').each(function(){t.push(v(this).val())}),m.quick_edits.update("categories",t)}),r.find("textarea#post_tag").off("change").on("change",function(){v(this).val().length&&m.quick_edits.update("tags",v(this).val().split(","))})),a.find(".uc-"+f.type+'-author select[name="post_author"] > option[value="'+n+'"]').prop("selected",!0),a.find(".uc-"+f.type+'-parent select[name="post_parent"] > option[value="'+i+'"]').hide(),a.find(".uc-"+f.type+'-parent select[name="post_parent"] > option[value="'+s+'"]').prop("selected",!0),a.find(".uc-"+f.type+'-template select[name="post_template"] > option[value="'+o+'"]').prop("selected",!0)}),UpdraftCentral.register_row_clicker(".uc_quick_edit button.cancel",function(t){var e=v(this).closest(".uc_quick_edit").data("id");v("div#"+f.type+"-quick-edit-"+e).hide(),v("div#"+f.type+"-item-"+e).show()}),UpdraftCentral.register_row_clicker(".uc_quick_edit button.save",function(t){var n=v(this).closest("div.uc_quick_edit"),e=n.data("id"),s=v(".uc-"+f.type+"-items-container div#"+f.type+"-item-"+e);if(m.dirty_edits.count())return UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[f.type+"s"].dirty_edits+"</p>"),!1;if(m.quick_edits.count()){if(m.quick_edits.update("id",e),m.has_quickedit_date_changed()){e=v("div#"+f.type+"-quick-edit-"+e),e={month:e.find(".uc-"+f.type+'-date select[name="mm"]').val(),day:e.find(".uc-"+f.type+'-date input[name="jj"]').val(),year:e.find(".uc-"+f.type+'-date input[name="aa"]').val(),hour:e.find(".uc-"+f.type+'-date input[name="hh"]').val(),minute:e.find(".uc-"+f.type+'-date input[name="mn"]').val(),second:e.find(".uc-"+f.type+'-date input[name="ss"]').val()};if(!m.validate_input_date(e))return UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[f.type+"s"].invalid_date_input+"</p>"),!1;var i=m.prepare_date(e);m.quick_edits.update("date",i.date),m.quick_edits.update("timestamp",i.timestamp),m.quick_edits.exists("status")&&"publish"==m.quick_edits.item("status")&&m.is_input_future_date(e)&&m.quick_edits.update("status","future")}l({name:"save",arguments:m.quick_edits.get_collection_object()},t).then(function(t){var e,i,a;void 0!==t.post&&t.post?(e={post:JSON.parse(t.post),misc:t.misc},void 0!==t.preloaded&&t.preloaded&&(i=JSON.parse(t.preloaded),void 0!==(a=m.manage_data.item("preloaded_data"))&&a&&((a=JSON.parse(a)).categories=i.categories,a.tags=i.tags,m.manage_data.update("preloaded_data",JSON.stringify(a)))),g(e,s.data("status")),t.hasOwnProperty("options")&&y(t.options)):(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[f.type+"s"].unkown_error+"</p>"),n.find("button.cancel").trigger("click"))})}else UpdraftCentral_Library.dialog.alert("<h2>"+udclion[f.type+"s"].quick_edit_heading+"</h2><p>"+udclion[f.type+"s"].no_changes+"</p>"),n.find("button.cancel").trigger("click")}),UpdraftCentral.register_row_clicker("."+f.type+"-actions > a."+f.type+"-action-item",function(t){var e,i,a,n,s,o=v(this).data("action"),r=v(this).data("id"),d=v(this).closest("div#"+f.type+"-item-"+r).data("json");-1!==v.inArray(o,["edit-classic","edit-gutenberg"])?"gutenberg"===(e=o.replace("edit-",""))?(i=!1,"undefined"==typeof localStorage||!localStorage||void 0!==(a=localStorage.getItem("uc-gutenberg-dialog-no-show"))&&a&&1===parseInt(a)&&(i=!0),i?m.load_updraftcentral_editor(e,d,t):UpdraftCentral_Library.dialog.custom("<h2>"+udclion[f.type+"s"].gutenberg_support+"</h2><p>"+udclion[f.type+"s"].gutenberg_notice+'</p><p><input type="checkbox" name="uc-dont-show-again" id="uc-dont-show-again" value="1"><label class="uc-dont-show-again-label" for="uc-dont-show-again">'+udclion[f.type+"s"].dont_show+"</label></p>",null,{classic:{label:"Use classic",className:"btn-secondary",callback:function(){m.load_updraftcentral_editor("classic",d,t)}},gutenberg:{label:"Continue",className:"btn-primary",callback:function(){m.load_updraftcentral_editor(e,d,t)}}})):m.load_updraftcentral_editor(e,d,t):-1!==v.inArray(o,["trash","restore","delete"])&&(a=r,s=t,void 0!==(n=o)&&n&&((a={name:"set_state",arguments:{id:a,action:n,paged:1,status:"all"}}).arguments["number"+f.type+"s"]=c,l(a,s).then(function(t){void 0!==t[f.type]?(t.hasOwnProperty("get")&&t.get&&(m.manage_data.update("response",t.get),u(t.get,s,!0)),v(".uc-"+f.type+"-buttons-filters select.uc-"+f.type+'-action > option[value="'+n+'"]').text(),UpdraftCentral_Library.dialog.alert("<h2>"+udclion[f.type+"s"].post_update_heading+"</h2><p>"+udclion[f.type+"s"].action_messages[n]+"</p>")):UpdraftCentral_Library.dialog.alert("<h2>"+udclion[f.type+"s"].post_update_heading+"</h2><p>"+udclion[f.type+"s"].unkown_error+"</p>")})))}),UpdraftCentral.register_row_clicker(".updraftcentral_create_"+f.type,function(a){a.find(".updraftcentral_row_extracontents").empty(),m.current_section="create";var t=UpdraftCentral.template_replace(f.type+"s-create",{});UpdraftCentral_Library.dialog.confirm("<h2>"+udclion[f.type+"s"].new_post+"</h2><p>"+t+"</p>",function(t){var i;t&&(0!=(t=v("input.uc-title-input").val()).trim().length?(i=v("input.uc-editor-choice:checked").val(),l({name:"save",arguments:{title:t,content:"",new:1},timeout:void 0!==udclion.user_defined_timeout&&udclion.user_defined_timeout?udclion.user_defined_timeout:30},a).then(function(t){var e;void 0!==t.post&&t.post?(e={post:JSON.parse(t.post),misc:t.misc},t.hasOwnProperty("preloaded")&&t.preloaded&&m.manage_data.update("preloaded_data",t.preloaded),t.hasOwnProperty("options")&&t.options&&("page"==f.type&&!m.manage_data.exists("parent_options")&&t.options.hasOwnProperty("page")&&m.manage_data.add("parent_options",t.options.page),!m.manage_data.exists("template_options")&&t.options.hasOwnProperty("template")&&m.manage_data.add("template_options",t.options.template)),m.load_updraftcentral_editor(i,e,a)):(UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[f.type+"s"].unkown_error+"</p>"),console.log(t))})):UpdraftCentral_Library.dialog.alert("<h2>"+udclion.error+"</h2><p>"+udclion[f.type+"s"].title_missing+"</p>"))})},!0),UpdraftCentral.register_row_clicker(".updraftcentral_manage_"+f.type+"s",function(n){m.manage_data.clear(),m.current_section="manage",m.current_group="all",m.pagination=new UpdraftCentral_Pagination({container:".uc-"+f.type+"-pagination",items_per_page:50,type:"remote",callback:function(t){var e=v("input.uc-"+f.type+"-search-posts").val(),i=v("select.uc-"+f.type+"-date-filter").val(),a=null,i=(i&&(a=(i=new Date(i.replace(" "," 1, "))).getMonth()+1+":"+i.getFullYear()),"post"==f.type?v("select.uc-post-category-filter").val():null);o(n,t,m.current_group,e,a,i)}}),o(n,null,null,null,null,null,!0,!0)},!0)},this.listen_for_fullscreen_resources=function(){UpdraftCentral.subscribe_to_node_changes(document.body,function(t,e){var i;v.fullscreen.isFullScreen()?(void 0!==(i=v('div[id^="__wp-uploader-id"]').not(".media-frame"))&&i.length&&i.appendTo(v("#updraftcentral_dashboard").parent()),void 0!==(i=v(document.body).find("div.modal-backdrop-container"))&&i.length&&i.appendTo(v("#updraftcentral_dashboard").parent())):(v("#updraftcentral_dashboard").parent().find('div[id^="__wp-uploader-id"]').not(".media-frame").appendTo(document.body).hide(),v("#updraftcentral_dashboard").parent().find("div.modal-backdrop-container").appendTo(document.body))},"uc_body_resources")},this.has_quickedit_date_changed=function(){var t=!1;if(m.quick_edits.count())for(var e=["mm","jj","aa","hh","mn","ss"],i=0;i<e.length;i++)if(m.quick_edits.exists(e[i])){t=!0;break}return t},this.clear_notices=function(){var t=v("#gutenberg_editor_container .components-notice-list");if(t.length&&t.find(".components-notice.is-dismissible").each(function(){v(this).find("button.components-notice__dismiss").trigger("click")}),void 0!==(t=wp.data.select("core/notices").getNotices())&&t&&t.length)for(var e=0;e<t.length;e++)wp.data.dispatch("core/notices").removeNotice(t[e].id)},this.observe_editor_error_state=function(){var t=v(".uc-block-editor-container #editor");UpdraftCentral.subscribe_to_node_changes(t,function(t,e){for(var i=[],a=[],n=0;n<t.length;n++){var s=t[n];s.addedNodes.length&&i.push(s.addedNodes[0].className),s.removedNodes.length&&a.push(s.removedNodes[0].className)}-1!==i.indexOf("components-drop-zone__provider")&&-1!==a.indexOf("components-drop-zone__provider")&&v("#updraftcentral_dashboard").trigger("editor-has-recovered")},"uc_editor")},this.send_upload_permissions=function(t){var e=setInterval(function(){wp.data.select("core/edit-post").isEditorPanelOpened("featured-image")||wp.data.dispatch("core/edit-post").toggleEditorPanelOpened("featured-image"),v("div.edit-post-sidebar .editor-post-featured-image").length&&(clearInterval(e),wp.data.dispatch("core").receiveUploadPermissions(t.has_upload_permissions),wp.data.dispatch("core/edit-post").toggleEditorPanelOpened("featured-image"))},1e3)},this.disable_publish_button=function(t){v("button.editor-post-publish-button").attr("aria-disabled",t),v("button.editor-post-publish-button").prop("disabled",t),v("button.editor-post-publish-panel__toggle").attr("aria-disabled",t),v("button.editor-post-publish-panel__toggle").prop("disabled",t)},this.update_permalink_preview_handler=function(){v(document.body).on("click","textarea.editor-post-title__input",function(){var e,i=wp.data.select("core/editor").getCurrentPost(),t=v(".editor-post-title__block");void 0!==t&&t.length&&t.hasClass("is-selected")&&(e=setInterval(function(){var t=v(".editor-post-permalink__link");void 0!==t&&t.length&&(clearInterval(e),v(".editor-post-permalink__link").attr("href","#").removeAttr("target").attr("onclick",'UpdraftCentral_Library.open_browser_at(UpdraftCentral.$site_row, { module: "direct_url", url: "'+i.link+"\" }, jQuery('#updraftcentral_dashboard_wrapper'));"))},500))})},this.prepare_date=function(t){function e(t){return t<10?"0"+t:t}var t=new Date(t.year,parseInt(t.month)-1,t.day,t.hour,t.minute,t.second),i={month:e(t.getMonth()+1),day:e(t.getDate()),year:t.getFullYear(),hour:e(t.getHours()),minute:e(t.getMinutes()),second:e(t.getSeconds())},a=i.year+"-"+i.month+"-"+i.day+"T"+i.hour+":"+i.minute+":"+i.second,n=new Date;return{date:a,future:t.getTime()>n.getTime(),formatted:t.toLocaleString("default",{year:"numeric",month:"short",day:"numeric"})+" @ "+e(t.getHours())+":"+e(t.getMinutes()),timestamp:i}},this.adjust_local_reference=function(e){var t=document.createElement("div");return t.innerHTML=e,v(t).find('img[src^="wp-content/"]').each(function(){var t;udclion.hasOwnProperty("home_url")&&udclion.home_url&&(t=v(this).attr("src"),e=e.replace(t,udclion.home_url+"/"+t))}),e},this.is_ivalue_exists=function(i,t){return!!v.grep(t,function(t,e){return i.toLowerCase()==t.toLowerCase()}).length},this.cleanupHistory=function(){var t=window.location.pathname;-1!=t.indexOf("post.php")&&(t=t.substring(0,t.indexOf("post.php"))),history.pushState("",document.title,t)},this.load_updraftcentral_editor=function(e,t,i){t={editor:e,post_data:JSON.stringify(t),site_id:i.data("site_id"),preloaded_data:m.manage_data.item("preloaded_data"),template_options:m.manage_data.item("template_options")};m.uc_editor.edits.clear(),m.uc_editor.state.clear(),m.send_local_command("load_post_editor",t,i).then(function(t){m.process_load_editor_response(e,t,i)}).always(function(){var t=v(document.body).find("div.modal-backdrop-container");void 0!==t&&t.length&&t.remove()})},this.scroll_content_to_top=function(){var t;v(window).scrollTop(0),v("div.edit-post-sidebar").scrollTop(0),v("div.editor-post-taxonomies__hierarchical-terms-list").scrollTop(0),t=setInterval(function(){(skeleton_container=v("div.block-editor-editor-skeleton__content")).length&&(clearInterval(t),skeleton_container.scrollTop(0))},1e3)},this.unload_remote_editor_styles=function(){m.disable_current_themes(!1),m.disable_current_wp_theme(!1),v('style[id^="uc_remote_styles-"]').remove(),v('style[id^="uc_local_styles-"]').remove()},this.load_remote_editor_styles=function(a){if(m.manage_data.exists("preloaded_data")){var t=m.manage_data.item("preloaded_data"),e=v(a).data("editor");if(void 0!==t&&t&&(data=JSON.parse(t)).hasOwnProperty("editor_styles")&&data.editor_styles)switch(e){case"gutenberg":var n=setInterval(function(){var t=v(a).find(".edit-post-visual-editor");if(void 0!==t&&t.length){clearInterval(n);var e=data.editor_styles;if(e.length){m.disable_current_themes(!0),t.hasClass("editor-styles-wrapper")||t.addClass("editor-styles-wrapper"),e.push({css:'.editor-styles-wrapper, .editor-styles-wrapper textarea { background: inherit; color: inherit; }\n\n.editor-styles-wrapper p { white-space: pre-wrap !important; word-wrap: break-word; }\n\n.editor-styles-wrapper img { vertical-align: inherit; border-style: inherit; }\n\n.screen-reader-text, .screen-reader-text span, .ui-helper-hidden-accessible { border: 0; clip: rect(1px, 1px, 1px, 1px); -webkit-clip-path: inset(50%); clip-path: inset(50%); height: 1px; margin: -1px; overflow: hidden; padding: 0; position: absolute; width: 1px; word-wrap: normal !important; }\n\n.editor-styles-wrapper button, .editor-styles-wrapper input[type="button"], .editor-styles-wrapper input[type="reset"], .editor-styles-wrapper input[type="submit"] { text-transform: inherit !important; }'});t="page"==f.type?udcstyles_page:udcstyles;void 0!==t&&t.hasOwnProperty("edit_"+f.type+"_css")&&v("<style/>",{id:"uc_local_styles-inline-edit_post"}).html(t["edit_"+f.type+"_css"]).appendTo(document.body);for(var i=0;i<e.length;i++)e[i].css.trim().length&&(v("<style/>",{id:"uc_remote_styles-"+i}).html(e[i].css).appendTo(document.body),e[i].hasOwnProperty("inline")&&e[i].inline.length&&v("<style/>",{id:"uc_remote_styles-inline-"+i}).html(e[i].inline).appendTo(document.body));void 0!==t&&t.hasOwnProperty(f.type+"s_inline_css")&&v("<style/>",{id:"uc_local_styles-inline-posts"}).html(t[f.type+"s_inline_css"]).appendTo(document.body)}}},500);break;case"classic":var s=setInterval(function(){if(void 0!==tinymce.activeEditor&&tinymce.activeEditor&&tinymce.activeEditor.hasOwnProperty("dom")&&tinymce.activeEditor.dom){clearInterval(s);var t,e=data.editor_styles;if(e.length){m.disable_current_wp_theme(!0),tinymce.activeEditor.dom.hasOwnProperty("select")&&(!tinymce.activeEditor.dom.hasOwnProperty("remove")||void 0!==(t=tinymce.activeEditor.dom.select("head > link"))&&t&&tinymce.activeEditor.dom.remove(t),tinymce.activeEditor.dom.hasOwnProperty("hasClass")&&tinymce.activeEditor.dom.hasOwnProperty("addClass")&&(tinyMCE.activeEditor.dom.hasClass(tinyMCE.activeEditor.dom.select("body"),"editor-styles-wrapper")||tinyMCE.activeEditor.dom.addClass(tinyMCE.activeEditor.dom.select("body"),"editor-styles-wrapper"),tinyMCE.activeEditor.dom.hasClass(tinyMCE.activeEditor.dom.select("body"),"entry-content")||tinyMCE.activeEditor.dom.addClass(tinyMCE.activeEditor.dom.select("body"),"entry-content"))),e.push({css:"body, editor-styles-wrapper { background: inherit !important; max-width: inherit; }\n\nbody#tinymce { padding: 0px 20px; }\n\nbody::before { position: relative; }"});for(var i=0;i<e.length;i++)e[i].css.trim().length&&tinymce.activeEditor.dom.hasOwnProperty("addStyle")&&tinymce.activeEditor.dom.addStyle(e[i].css)}}},500)}}},this.set_selected_image=function(t){var e,i,a=t.attr("aria-label"),n=t.data("id"),t=t.find(".thumbnail img");void 0!==t&&t.length&&(i=e="",void 0!==(t=t.attr("src"))&&t.length&&(e=t.substring(0,t.lastIndexOf("/")+1),-1!==t.indexOf(".")&&(i=t.substr(t.lastIndexOf(".")))),-1==(a=e+a).indexOf(i)&&(a+=i),m.uc_editor.state.update("featured_img",{thumbnail_url:t,folder:e,image_url:a}),m.uc_editor.edits.update("featured_media_url",a),m.uc_editor.edits.update("featured_media",n))},this.validate_input_date=function(t){var e,i=!0;for(e in t){var a=t[e];if(void 0===a||0==a.length||!UpdraftCentral_Library.is_numeric(a)){i=!1;break}}return i=(i=i&&((!(i=(!(i=!(parseInt(t.day)<1||31<parseInt(t.day))&&i)||!(4!==t.year.length||parseInt(t.year)<1970))&&i)||!(parseInt(t.hour)<0||23<parseInt(t.hour)))&&i))&&(parseInt(t.minute)<0||59<parseInt(t.minute))?!1:i},this.is_input_future_date=function(t){var e;return e=void 0!==t&&t?t:{month:(e=(t=v("fieldset#timestampdiv")).find("div.timestamp-wrap")).find("select#mm").val(),day:e.find("input#jj").val(),year:e.find("input#aa").val(),hour:e.find("input#hh").val(),minute:e.find("input#mn").val(),second:t.find("input#ss").val()},m.validate_input_date(e)?(t=new Date(e.year,parseInt(e.month)-1,e.day,e.hour,e.minute,e.second),new Date<t):null},this.send_local_command=function(t,e,i){var a=v.Deferred(),i=void 0!==i&&i?i:v("#updraftcentral_dashboard_existingsites");return UpdraftCentral.send_ajax(t,e,null,"via_mothership_encrypting",i,function(t,e,i){"ok"===e&&(t.hasOwnProperty("message")?a.resolve(t.message):a.reject())}),a.promise()},this.init_tiny_mce=function(t){"object"==typeof tinymce&&"function"==typeof tinymce.execCommand&&(void 0!==tinymce.EditorManager&&(tinymce.EditorManager.editors=[]),tinymce.init({selector:t,height:800,branding:!1,menubar:!1,resize:!1,force_br_newlines:!0,force_p_newlines:!0,plugins:"textcolor hr lists fullscreen paste wordpress wpdialogs wplink tabfocus",toolbar1:"formatselect bold italic numlist bullist blockquote alignleft aligncenter alignright link unlink wp_more fullscreen wp_adv",toolbar2:"strikethrough hr forecolor backcolor pastetext pasteword removeformat indent outdent undo redo | sizeselect fontselect fontsizeselect",fontsize_formats:"8pt 10pt 12pt 14pt 18pt 24pt 36pt",paste_as_text:!0,color_picker_callback:function(t,e){t("#888")},setup:function(t){v(document).find(".wp-core-ui.wp-editor-wrap").hasClass("html-active")&&v(document).find(".wp-core-ui.wp-editor-wrap").removeClass("html-active").addClass("tmce-active")}}),tinymce.execCommand("mceRemoveEditor",!1,t),tinymce.execCommand("mceAddEditor",!1,t),"undefined"!=typeof quicktags&&quicktags&&quicktags({id:t,buttons:"strong,em,link,block,del,ins,img,ul,ol,li,code,close"}))},this.apply_subscriptions_observer=function(l,u,p){var _,h=is_saving=!1,t=(wp.data.select("core").canUser=function(t,e){if("create"===t&&"media"===e)return!!l.has_upload_permissions},m.observe_editor_error_state(),m.send_upload_permissions(l),["featured-image","discussion-panel","post-link","post-excerpt","page-attributes"]);"post"==f.type&&(t=["taxonomy-panel-category","taxonomy-panel-post_tag","featured-image","discussion-panel","post-link","post-excerpt","post-attributes"]);for(var e=0;e<t.length;e++)wp.data.select("core/edit-post").isEditorPanelOpened(t[e])&&wp.data.dispatch("core/edit-post").toggleEditorPanelOpened(t[e]);m.update_permalink_preview_handler(),window.wp_data_unsubscribe=wp.data.subscribe(function(c){_=wp.data.select("core/editor").getCurrentPost();var t,e,i,a,n,s,o=v("div.edit-post-header-toolbar"),r=v(document.body),d=r.find("div.modal-backdrop-container");v("a.components-notice__action.is-link").attr("target","_blank"),v(".components-snackbar-list__notice-container a.components-snackbar__action").attr("target","_blank"),v(".post-publish-panel__postpublish-buttons a").attr("target","_blank"),o.length&&!h?(o=l.logo,t=l.misc,(e=v("div.edit-post-header-toolbar")).length&&(e.find(".uc-logo-container").length||((i=v("<div/>",{class:"uc-logo-container"})).html('<img class="logo-landscape" src="'+o+'" alt="UpdraftCentral" width="165" height="30">'),e.prepend(i))),(o=v("div.edit-post-header__settings")).length&&(o.find("#uc_close_editor").length||((e=v("<button/>",{text:udclion[f.type+"s"].close_editor,id:"uc_close_editor",type:"button",class:"components-button editor-post-close is-button is-default is-large",style:"padding: 0 12px 2px; margin: 2px; height: 33px; line-height: 32px;"})).on("click",function(){var t=v(document.body).find("div#gutenberg_editor_container");t.length&&t.hide(),v(".updraftcentral_spinner").is(":visible")&&v(".updraftcentral_spinner").remove(),v(document.body).trigger("updraftcentral_"+f.type+"_editor_closed",[t])}),o.prepend(e)),o.find("#uc_preview_lnk").length||void 0===t||(i=v("<a/>",{id:"uc_preview_lnk",href:"#",onclick:'UpdraftCentral_Library.open_browser_at(UpdraftCentral.$site_row, { module: "direct_url", url: "'+t.link+"\" }, jQuery('#updraftcentral_dashboard_wrapper'));"}),e=v("<button/>",{text:udclion[f.type+"s"].preview,id:"uc_preview_post",type:"button",class:"components-button editor-preview-post is-button is-default is-large"}),i.append(e),o.find("#uc_close_editor").after(i))),h=!0,v(".updraftcentral_spinner").is(":visible")&&v(".updraftcentral_spinner").remove(),m.scroll_content_to_top(),k(),"post"==f.type&&wp.data.select("core").getTaxonomies(),v(document.body).trigger("updraftcentral_"+f.type+"_editor_loaded",[p])):k(),wp.data.select("core/editor").isEditedPostDirty()?m.disable_publish_button(!1):m.disable_publish_button(!0),wp.data.select("core/editor").isSavingPost()&&(void 0!==d&&0!=d.length||r.append('<div class="modal-backdrop-container"><div class="modal-backdrop fade show dynamic"></div><div class="updraftcentral_spinner"></div></div>')),wp.data.select("core/editor").didPostSaveRequestSucceed()&&!wp.data.select("core/editor").isSavingPost()&&_.hasOwnProperty("post_data")&&(v("#uc_preview_lnk").attr("href","#").removeAttr("target").attr("onclick",'UpdraftCentral_Library.open_browser_at(UpdraftCentral.$site_row, { module: "direct_url", url: "'+_.link+"\" }, jQuery('#updraftcentral_dashboard_wrapper'));"),"manage"===m.current_section&&(g(_.post_data,u),_.post_data.hasOwnProperty("options")&&y(_.post_data.options)),delete _.post_data,void 0!==d&&d.length&&(d.remove(),m.cleanupHistory())),wp.data.select("core/editor").didPostSaveRequestFail()&&void 0!==d&&d.length&&(d.remove(),m.cleanupHistory()),wp.data.select("core/edit-post").isEditorPanelOpened("post-link")&&(a=setInterval(function(){var t=v(".edit-post-post-link__link");void 0!==t&&t.length&&(clearInterval(a),v(".edit-post-post-link__link").attr("href",_.link).removeAttr("target").attr("onclick",'UpdraftCentral_Library.open_browser_at(UpdraftCentral.$site_row, { module: "direct_url", url: "'+_.link+"\" }, jQuery('#updraftcentral_dashboard_wrapper'));return false;"))},500)),"post"==f.type&&(wp.data.select("core/edit-post").isEditorPanelOpened("taxonomy-panel-category")&&(n=setInterval(function(){var t,e=v(".editor-post-taxonomies__hierarchical-terms-list");void 0!==e&&e.length&&(t=e.parent().find(".uc_block_load_wait"),0==e.html().trim().length?t.length||e.parent().append('<div class="uc_block_load_wait"><img src="'+udclion.wpo.images+'spinner-2x.gif" class="uc-block-spinner" /></div>'):(clearInterval(n),t.remove()))},500)),wp.data.select("core/edit-post").isEditorPanelOpened("taxonomy-panel-post_tag")&&(s=setInterval(function(){var t,e=v(".components-form-token-field__input-container"),i=wp.data.select("core/editor").getEditedPostAttribute("tags");void 0!==e&&e.length&&i.length&&(i=e.find(".components-form-token-field__token"),t=e.parent().find(".uc_block_load_wait"),0==i.length&&_.tags.length&&0!=_.tags[0]?t.length||e.parent().append('<div class="uc_block_load_wait"><img src="'+udclion.wpo.images+'spinner-2x.gif" class="uc-block-spinner" /></div>'):(clearInterval(s),t.remove()))},500)))})},this.process_load_editor_response=function(t,l,u){var p,e,i,_=v(document.body),a=_.find("div#"+t+"_editor_container"),n=l.data,s=m.manage_data.item("preloaded_data"),_=(void 0!==s&&s&&(s=JSON.parse(s)),void 0!==a&&0!=a.length||((a=v("<div/>",{id:t+"_editor_container"})).data("editor",t),_.append(a)),"gutenberg"===t?'<div class="'+t+'-editor-post"></div>':'<div id="'+t+'_editor" class="'+t+'"><div id="editor" class="'+t+'__editor"></div></div>');switch(a.length&&a.is(":visible")&&a.html(_),t){case"classic":var o,r=v.extend(!0,{},n.misc),d=(r.hasOwnProperty("sample_permalink")&&r.sample_permalink.length&&(-1!==r.sample_permalink[0].indexOf("%postname%")?(r.site_url=r.sample_permalink[0].replace("%postname%/",""),void 0!==r.sample_permalink[1]&&r.hasOwnProperty("slug")&&0==r.slug.trim().length&&(r.slug=r.sample_permalink[1])):-1!==r.sample_permalink[0].indexOf("?p=")&&v("#edit-slug-buttons button.edit-slug").hide()),!1),r=(r.hasOwnProperty("link")&&r.link&&(r.hasOwnProperty("slug")&&r.slug&&-1!==r.link.indexOf(r.slug)&&(r.site_url=r.link.replace(r.slug,"")),-1===r.link.indexOf("page_id")&&-1===r.link.indexOf("post_id")||(r.link=r.link.replace(r.slug,""),r.site_url=r.link,d=!(r.slug=""))),UpdraftCentral.template_replace("dashboard-classic_editor",{post:n.post,misc:r,editor:n.editor,metaboxes:(r=n.metaboxes,e=v("<div/>").html(r),i=["submitdiv","pageparentdiv","postimagediv"],"post"==f.type&&(i=["submitdiv","categorydiv","tagsdiv-post_tag","postimagediv"]),e.find("div.postbox").each(function(){p=v(this).attr("id"),Array.isArray(i)&&i.length&&-1==v.inArray(p,i)&&e.find("#"+p).remove()}),e.html()),logo:n.logo})),d=(a.find("#"+t+"_editor").html(r),d&&v("#edit-slug-buttons").hide(),{order:n.post.menu_order});m.manage_data.exists("template_options")&&(d.template=b(m.manage_data.item("template_options"),{value:"filename",label:"template"})),m.manage_data.exists("parent_options")&&(d.page=b(m.manage_data.item("parent_options"),{value:"id",label:"title"},null,[n.post.ID])),"post"==f.type?(o=UpdraftCentral.template_replace("posts-categories",n.categories_metabox_content),a.find("#categorydiv .inside").html(o),o=UpdraftCentral.template_replace("posts-tags",n.tags_metabox_content),a.find("#tagsdiv-post_tag .inside").html(o)):(o=UpdraftCentral.template_replace("pages-page-attributes",d),a.find("#pageparentdiv .inside").html(o)),w(l),v(document.body).trigger("updraftcentral_"+f.type+"_editor_loaded",[a]);break;case"gutenberg":window.qstring="site_id="+u.data("site_id")+"&uc_nonce="+n.info.uc_nonce+"&uc_refIds="+n.info.uc_refIds+"&post_type="+n.post.post_type;var h=n.post.post_status,r=(v.fullscreen.isFullScreen()?u.prepend('<div class="updraftcentral_spinner"></div>'):v(document.body).append('<div class="updraftcentral_spinner"></div>'),m.clear_notices(),UpdraftCentral.template_replace("dashboard-block_editor",{title:n.post.post_title,metaboxes:n.metaboxes})),c=(a.find("."+t+"-editor-post").html(r),n.settings),d=(c.autosave=null,c.autosaveInterval=86400,"page"==n.post.post_type&&s.hasOwnProperty("templates")&&s.templates&&(c.availableTemplates=s.templates),wp.data.dispatch("core/nux"));void 0!==d&&d&&d.disableTips(),window._wpLoadBlockEditor=new Promise(function(a,t){wp.domReady(function(){wp.apiFetch.use(function(t,e){return t.hasOwnProperty("path")&&t.path&&(t.path+=-1!==t.path.indexOf("?")?"&":"?",t.path+=window.qstring),e(t)}),wp.blocks.setCategories(n.block_categories),wp.blocks.unstable__bootstrapServerSideBlockDefinitions(n.block_definitions);var t=wp.blocks.getBlockTypes();if(0<t.length)for(var e=0;e<t.length;e++){var i=t[e];wp.blocks.unregisterBlockType(i.name)}a(wp.editPost.initializeEditor("editor",n.post.post_type,n.post.ID,c,{title:n.post.post_title,content:n.post.post_content,excerpt:n.post.post_excerpt}))})}).then(function(t){m.reset_info.data=n,m.reset_info.previous_status=h,m.reset_info.location=a,m.apply_subscriptions_observer(n,h,a)})}},this.disable_current_themes=function(t){if("page"==f.type&&"undefined"!=typeof udcstyles_page&&udcstyles_page.hasOwnProperty("styles")||"post"==f.type&&"undefined"!=typeof udcstyles&&udcstyles.hasOwnProperty("styles")){for(var e=("post"==f.type?udcstyles:udcstyles_page).styles,i=0;i<e.length;i++)-1===v.inArray(e[i].id,["updraftcentral-dashboard-css","media-views","mediaelement","imgareaselect","buttons","editor-buttons"])&&(v('link[id="'+e[i].id+'-css"').length&&v('link[id="'+e[i].id+'-css"').prop("disabled",t),v('style[id="'+e[i].id+'-inline-css"').length&&v('style[id="'+e[i].id+'-inline-css"').prop("disabled",t));v('link[id="wp-editor-css"]').prop("disabled",t),v('link[id="wp-editor-inline-css"]').prop("disabled",t),v('link[id^="bootstrap"]').prop("disabled",t),v('style[id^="boostrap"]').prop("disabled",t)}},this.disable_current_wp_theme=function(t){var e;v.fullscreen.isFullScreen()&&("post"==f.type?udcstyles.hasOwnProperty("current_theme_uri")&&udcstyles.current_theme_uri&&(e=v('link[href^="'+udcstyles.current_theme_uri+'"]')):udcstyles_page.hasOwnProperty("current_theme_uri")&&udcstyles_page.current_theme_uri&&(e=v('link[href^="'+udcstyles_page.current_theme_uri+'"]')),void 0!==e&&e.length&&e.prop("disabled",t))}}function UpdraftCentral_Pagination(u){var e,i,a=this,n=jQuery,u=n.extend({},u),p=new UpdraftCentral_Collection,_=new UpdraftCentral_Collection,r=function(t){var e,i,a,n;return void 0===t.items_from&&(e=parseInt(t.page),i=parseInt(t.pages),a=parseInt(t.results),n=0<parseInt(a%i)?1:0,n=parseInt(a/i)+n,t.items_from=1+(e*n-n),t.items_to=e===i?a:e*n),t};this.preload_items=function(t){if(p.count()&&p.clear(),void 0!==t&&t)for(var e=0;e<t.length;e++){var i,a=t[e];a.hasOwnProperty("name")&&a.hasOwnProperty("website")&&(i=a.name+"_"+a.website,p.add(i,a))}},this.set_filtered_items=function(t){_=t},this.set_remote_data=function(t){e=t},this.get_data=function(t){return i=u.hasOwnProperty("type")&&"local"===u.type?function(t){var e={info:{},items:[]},i=_.count()?_:p,a=u.hasOwnProperty("items_per_page")?u.items_per_page:10;if(i.count()){t=void 0!==t?t:1;for(var n=i.count(),s=0<parseInt(n%a)?1:0,s=parseInt(n/a)+s,o=t*a-a,r=i.keys().splice(o,a),o=1+o,a=t===s?n:t*a,d=[],c=0;c<r.length;c++){var l=i.item(r[c]);d.push(l)}e={info:{page:t,pages:s,results:n,items_from:o,items_to:a},items:d}}return e}(t):e},this.render=function(t){void 0!==i&&i&&void 0===t||a.get_data(t),void 0!==i&&i&&(t=function(t){var e,i,a,n,s,o;{if(void 0!==t)return t=r(t),e=parseInt(t.page),i=parseInt(t.pages),a=parseInt(t.results),n=parseInt(t.items_from),t=parseInt(t.items_to),s=!1,u.hasOwnProperty("type")&&"local"===u.type&&(s=!0),o="",1!==e&&(o=o+('<a href="#" data-page="1" data-preloaded="'+s+'" class="uc-pagination-first-button">'+udclion.first)+'</a> <span class="uc-pagination-separator">|</span> '),1<e&&(o+='<a href="#" data-page="'+(e-1)+'" data-preloaded="'+s+'" class="uc-pagination-previous-button">'+udclion.previous+"</a>"),1<e&&e<i&&(o+=' <span class="uc-pagination-separator">|</span> '),e<i&&(o+='<a href="#" data-page="'+(e+1)+'" data-preloaded="'+s+'" class="uc-pagination-next-button">'+udclion.next+"</a>"),(o=i!==e?(o+=' <span class="uc-pagination-separator">|</span> ')+'<a href="#" data-page="'+i+'" data-preloaded="'+s+'" class="uc-pagination-last-button">'+udclion.last+"</a>":o)+('<div class="uc-pagination-results-info">'+sprintf(udclion.page_of,e,i)+', <span class="uc-pagination-item-bounds">'+sprintf(udclion.total_items,n,t,a))+"</span></div>";console.log("Error: uc-library.js:UpdraftCentral_Pagination:build_interface - unable to construct pagination interface because the required info object is not defined. Possible cause, the module's handler in UpdraftPlus is outdated.")}}(i.info),u.hasOwnProperty("container")&&u.container&&(n(u.container).html(t),n(u.container).find("a.uc-pagination-first-button, a.uc-pagination-previous-button, a.uc-pagination-next-button, a.uc-pagination-last-button").off("click").on("click",function(){var t=n(this).data("page");u.hasOwnProperty("callback")&&u.callback&&u.callback.apply(null,[t])})))}}function UpdraftCentral_Site_Filter(r){var d=jQuery,s=new UpdraftCentral_Collection,o=(r=d.extend({},r)).hasOwnProperty("default_site")&&r.default_site?r.default_site:null,c="uc_site_filter_",n=new UpdraftCentral_Collection,e=function(a){return d(".updraftcentral_site_row:not(.suspended)").each(function(){var i=d(this).data("site_id"),t=d(this).find("li.udc_tag_item .udc_tag_text");void 0!==t&&t&&t.length&&t.each(function(){var t,e=d(this).data("tag_name");n.exists(e)?((t=n.item(e)).push(i),n.update(e,t)):(a.push({id:e,text:sprintf(udclion.add_all_sites_tagged,e)}),n.add(e,[i]))})}),a};this.render=function(){var i,a,t=function(){var t=r.hasOwnProperty("extra_classes")&&r.extra_classes?" "+r.extra_classes:"",t=d("<div></div>",{class:c+"container"+t}),e=(d("<div></div>",{class:c+"label"}).html(r.label).appendTo(t),d("<div></div>",{class:c+"sites_container"})),i=(d("<select></select>",{class:c+"sites",name:"sites[]",multiple:"multiple"}).appendTo(e),e.appendTo(t),d("<div></div>",{class:c+"buttons"}));if(r.hasOwnProperty("buttons")&&Array.isArray(r.buttons))for(var a=0;a<r.buttons.length;a++){var n=r.buttons[a],s=n.hasOwnProperty("text")?n.text:udclion.submit,o=a+1;d("<button></button>",{id:n.hasOwnProperty("id")?n.id:c+"button"+o,name:n.hasOwnProperty("name")?n.name:c+"button"+o,class:n.hasOwnProperty("class")?"btn btn-primary "+n.class:"btn btn-primary"}).text(s).on("click",function(){n.hasOwnProperty("callback")&&"function"==typeof n.callback&&n.callback.apply(null,[])}).appendTo(i)}return i.appendTo(t),t}();r.hasOwnProperty("container")&&r.container&&(d(r.container).append(t),d(r.container).find("select."+c+"sites").select2({data:(a=[],(i=[]).push({id:0,text:udclion.add_all_sites}),i=e(i),d(".updraftcentral_site_row:not(.suspended)").each(function(){var t=d(this).data("site_id"),e=d(this).data("site_description");i.push({id:t,text:e}),a.push(t)}),n.add(0,a),i),placeholder:r.hasOwnProperty("placeholder")?r.placeholder:udclion.press_to_select_website}),d(r.container).find("select."+c+"sites").off("select2:select").on("select2:select",function(t){var t=t.params.data;n.exists(t.id)&&(d(this).val(null).trigger("change"),t=n.item(t.id),d(this).val(t).trigger("change"))}),d(r.container).find("select."+c+"sites").off("select2:open").on("select2:open",function(){d.fullscreen.isFullScreen()&&d(document.body).children("span.select2-container--open").appendTo("#updraftcentral_dashboard")}),d(r.container).find("select."+c+"sites").off("select2:opening select2:closing").on("select2:opening select2:closing",function(t){d(this).parent().find(".select2-search__field").prop("disabled",!0)}),d(r.container).find("input.select2-search__field").hide(),void 0!==o&&o&&d(r.container).find("select."+c+"sites").select2("trigger","select",{data:{id:o.data("site_id"),text:o.data("site_description")}}))},this.get_selected_sites=function(){var t=d("select."+c+"sites").val(),e=!1;if(s.count()&&s.clear(),void 0!==t&&t&&t.length)for(var i="string"==typeof t?t.split(","):t,a=0;a<i.length;a++){var n=d('.updraftcentral_site_row[data-site_id="'+i[a]+'"');n.length&&s.add(n.data("site_id"),n)}return s.count()||(s.add(o.data("site_id"),o),e=!0),{sites:s,selection_empty:e}}}function UpdraftCentral_Recorder(){function t(){d=new UpdraftCentral_Collection,0}var d,c=this,l=jQuery;function u(){c.current_site="",UpdraftCentral.$site_row=null}function p(t,e){if(void 0!==e)for(var i=0;i<e.length;i++){var a=e[i].dropdown,n=e[i].selected,s=l(a).prop("class"),a=l(a).prop("id"),o="";void 0!==s&&s.length?o="select."+s.replace(/\s/,"."):void 0!==a&&a.length&&(o="select#"+a),o.length&&t.find(o).find('option[value="'+n+'"]').prop("selected","selected")}}function _(t,e){var i=t.no_sites[e].container,a=t.no_sites[e].post_load_callback,n=t.no_sites[e].mode,s=t.no_sites[e].options;l(".updraftcentral-search-area").hide(),l(i).parent().find(".ui-sortable-handle").hide(),l(i).html(t.no_sites[e].html),p(l(i),s),l("#updraftcentral_dashboard_existingsites").trigger("extra_contents_loaded_"+e,[null]),l("#updraftcentral_dashboard_existingsites").trigger("recorder_content_loaded",[e,l(i).html(),null]),n===e&&"function"==typeof a&&a.apply(null,[])}t(),this.reset_recorder=function(){t(),u()},this.get_current_site=function(){return void 0!==c.current_site&&c.current_site.length?c.current_site:null},this.load=function(){l("#updraftcentral_dashboard_existingsites").on("extra_contents_loaded_updates",function(t,e){null!==e||void 0!==(e=l("#updraftcentral_dashboard_existingsites").find("#updates_container"))&&e.length&&e.is(":visible")&&(u(),l("#updraft-central-navigation > div.updraftcentral_site_selected").html(udclion.all_sites_selected),l("#updraft-central-content button.updraftcentral_action_choose_another_site").show())}),l("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set_before",function(t,e){c.current_menu=e.new_mode,d.exists(e.new_mode)||d.add(e.new_mode,{sites:{},no_sites:{}}),d.exists(e.previous_mode)||d.add(e.previous_mode,{sites:{},no_sites:{}});var i,a,n,s=d.item(e.previous_mode),o=(void 0!==c.current_site&&c.current_site.length&&(n=e.extra_contents,i=c.current_site.data("site_id"),o=n.children().clone(!0,!0),void 0===s.sites[i]&&(s.sites[i]={}),s.sites[i].html=o,s.sites[i].force=e.force,s.sites[i].options=[],n.find("select").each(function(){s.sites[i].options.push({dropdown:l(this),selected:l(this).find("option").filter(":selected").val()})}),d.update(e.previous_mode,s),n.html("")),void 0!==s.no_sites[e.previous_mode]&&(a=s.no_sites[e.previous_mode].container,o=(n=l(a)).children().clone(!0,!0),s.no_sites[e.previous_mode].html=o,s.no_sites[e.previous_mode].options=[],n.find("select").each(function(){s.no_sites[e.previous_mode].options.push({dropdown:l(this),selected:l(this).find("option").filter(":selected").val()})}),d.update(e.previous_mode,s),l(a).html("")),!0===e.force&&e.new_mode===e.previous_mode&&(c.reset=!0),d.exists("search_tag")||d.add("search_tag",""),void 0!==c.current_site&&c.current_site.length&&("sites"===e.previous_mode?(d.update("search_tag",l(".updraftcentral-search-area input#udc_search_tag").val()),l(".updraftcentral-search-area input#udc_search_tag").val("")):"sites"!==e.new_mode?l(".updraftcentral-search-area").hide():l(".updraftcentral-search-area input#udc_search_tag").val(d.item("search_tag"))),l(".updraft_site_actions.open"));o.length?o.removeClass("open"):(o=l(".updraft_site_actions.show")).length&&o.removeClass("show"),void 0===c.current_site||c.current_site.length||l("#updraft-central-navigation > div.updraftcentral_site_selected").html(udclion.no_site_selected)}),l("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set",function(t,e){var i,a,n,s,o,r;e.new_mode!==e.previous_mode?void 0!==c.current_site&&c.current_site.length?(s=c.current_site.data("site_id"),void 0!==(i=l('.updraftcentral_site_row[data-site_id="'+s+'"]'))&&i&&i.length&&(a=!1,"sites"!==e.new_mode?((r=i.closest("#updraftcentral_dashboard_existingsites")).find('.updraftcentral_site_row[data-site_id="'+s+'"]').parent().show(),r.find('.updraftcentral_site_row[data-site_id!="'+s+'"]').each(function(){l(this).parent().hide()}),l(".updraftcentral-search-area").hide(),l("#updraft-central-content button.updraftcentral_action_choose_another_site").show(),void 0!==(r=d.item(e.new_mode))&&(n=r.sites[s],void 0!==r.no_sites[e.new_mode]?_(r,e.new_mode):void 0!==n&&(n.force?a=!0:n.storeable||void 0===n.action_item?(s=i.find(".updraftcentral_row_extracontents"),o=n.options,s.html(n.html),p(s,o),l("#updraftcentral_dashboard_existingsites").trigger("extra_contents_loaded_"+e.new_mode,[i]),l("#updraftcentral_dashboard_existingsites").trigger("recorder_content_loaded",[e.new_mode,n.html,n])):l("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set_after",function(t,e){l("#updraftcentral_dashboard_existingsites").off("updraftcentral_dashboard_mode_set_after"),l(n.action_item).trigger("click")})))):a=!0,a&&(l(".updraftcentral-search-area").show(),i.closest("#updraftcentral_dashboard_existingsites").find(".updraftcentral_site_row").parent().show()))):void 0!==(r=d.item(e.new_mode))&&(void 0!==r.no_sites[e.new_mode]?_(r,e.new_mode):(l(".updraftcentral-search-area").show(),l("#updraftcentral_dashboard_existingsites").find(".ui-sortable-handle").show())):c.reset&&(d=new UpdraftCentral_Collection,0,c.current_site="",UpdraftCentral.$site_row=null,l(".updraftcentral-search-area").show(),l("#updraftcentral_dashboard_existingsites").find(".ui-sortable-handle").show(),l("#updraft-central-navigation > div.updraftcentral_site_selected").html(udclion.no_site_selected)),UpdraftCentral.register_event_handler("click",".updraftcentral_mode_actions button.updraftcentral_action_show_all_updates",function(){var t=d.item(c.current_menu);void 0!==t&&t&&(void 0===t.no_sites[c.current_menu]&&(t.no_sites[c.current_menu]={container:"#updates_container.updraftcentral_row_extracontents",html:"",mode:"updates",post_load_callback:function(){"function"==typeof UpdraftCentral_Updates.reload_interface&&UpdraftCentral_Updates.reload_interface()}}),d.update(c.current_menu,t)),void 0!==c.current_site&&c.current_site.length&&l("#updraft-central-content button.updraftcentral_action_choose_another_site").show(),u(),l("#updraft-central-navigation > div.updraftcentral_site_selected").html(udclion.all_sites_selected),l("#updraft-central-content button.updraftcentral_action_choose_another_site").show()}),UpdraftCentral.register_row_clicker(".btn-group > button",function(t){var e,i,a;l(this).closest(".updraft_site_actions").hasClass("more-option-container")||(c.current_site=t,l("#updraft-central-navigation > div.updraftcentral_site_selected").html(udclion.selected_site+": "+c.current_site.data("site_description")),"sites"!==c.current_menu&&(action_item=l(this),(e=l(".updraftcentral-search-area input#udc_search_tag").val()).length&&(d.update("search_tag",e),l(".updraftcentral-search-area input#udc_search_tag").val("")),l(".updraftcentral-search-area").hide(),e=!0,void 0!==action_item.data("storeable")&&!1===action_item.data("storeable")&&(e=!1),i=c.current_site.data("site_id"),void 0!==(a=d.item(c.current_menu))&&a&&(void 0===a.sites[i]&&(a.sites[i]={}),a.sites[i].action_item=action_item.get(0),a.sites[i].storeable=e,a.no_sites={},d.update(c.current_menu,a)),"sites"!==c.current_menu&&t.closest("#updraftcentral_dashboard_existingsites").find('.updraftcentral_site_row:not([data-site_id="'+i+'"])').parent().slideUp()))})}),l(".updraftcentral-search-area input#udc_search_tag").val(""),l("#updraft-central-navigation > div.updraftcentral_site_selected").length||l("#updraft-central-navigation").append('<div class="updraftcentral_site_selected">'+udclion.no_site_selected+"</div>")}}function UpdraftCentral_Keyboard_Shortcuts(){function a(){if(void 0!==window.navigator.userAgent){var t=window.navigator.userAgent.toLowerCase();if(-1!==t.indexOf("macintosh")||-1!==t.indexOf("mac_powerpc"))return!0}return!1}var l,p,u,_,h,f=this,m=jQuery,v="",g=!1,e=(this.is_macintosh=!1,this.init=function(t){u=new UpdraftCentral_Collection,h=new UpdraftCentral_Collection,l={},p=[],f.originals=udclion.keyboard_shortcuts,_=null,e().then(function(t){f.is_macintosh=t}),s(t),void 0===t&&(m("#updraftcentral_dashboard_existingsites").on("recorder_content_loaded",function(t,e,i,a){_={menu:e,content:i,site:a}}),m(document).on("keydown",o),m("#updraftcentral_dashboard").on("updraftcentral_bootbox_dialog_opened",function(t,e,i){n(i)}),n(m("#updraftcentral_modal_dialog")),r())},this.register_shortcut=function(t,e,i){var a=e,a={name:t.name,key:t.key,description:t.description,action:a="function"==typeof e?function(){UpdraftCentral.check_processing_state()||e.apply(null,[t.name,t.menu])}:a,menu:void 0!==t.menu?t.menu:"",site_required:void 0===t.site_required||t.site_required};y(a),u.exists(t.key)?void 0!==i&&i&&u.update(t.key,a):u.add(t.key,a)},this.save_shortcut=function(t,e,i){var a=m.Deferred();return UpdraftCentral.send_ajax("shortcuts",{name:t,key:e},null,"via_mothership_encrypting",i,function(t,e,i){"ok"===e&&t.hasOwnProperty("message")&&("success"===t.message?a.resolve():a.reject())}),a.promise()},this.clear_shortcuts=function(t){var a=m.Deferred();return UpdraftCentral.send_ajax("shortcuts",{clear:!0},null,"via_mothership_encrypting",t,function(t,e,i){"ok"===e&&t.hasOwnProperty("message")&&("success"===t.message?a.resolve(t):a.reject())}),a.promise()},function(){var e=m.Deferred();return void 0!==window.navigator.userAgentData&&window.navigator.userAgentData&&"function"==typeof window.navigator.userAgentData.getHighEntropyValues?window.navigator.userAgentData.getHighEntropyValues(["platform"]).then(function(t){void 0!==t&&void 0!==t.platform?-1!==t.platform.toLowerCase().indexOf("mac")?e.resolve(!0):e.resolve(!1):e.resolve(a())}):e.resolve(a()),e.promise()}),n=function(t){void 0!==t&&t&&t.on("click","a.keyboard_shortcuts",function(){var t=m(this).closest(".bootbox.modal.show");(t=t.length?t:m(this).closest("#updraftcentral_modal_dialog.show")).length&&t.removeClass("fade").scrollTop(0).hide(),i(null,t)})},y=function(t){void 0===t.site_required||t.site_required||(l[t.name]=!t.site_required)},s=function(t){b(),w();var e=udclion.user_defined_shortcuts;if("undefined"!=typeof udclion&&void 0!==udclion.keyboard_shortcuts)for(var i in udclion.keyboard_shortcuts){var a=(s=JSON.parse(JSON.stringify(udclion.keyboard_shortcuts[i]))).key,n=!1;(n=s.menu.length&&!m("#updraft-menu-item-"+s.menu).is(":visible")?!0:n)||(s.name=i,u.add(a,s),void 0!==s.popup&&s.popup&&h.add(a,!0),y(s))}for(var s,o,r,d=u.get_items(),c=0;c<d.length;c++)void 0!==e[(s=d[c]).name]&&(o=s.key,(r=e[s.name]).length&&(s.key=r,u.add(s.key,s),u.remove(o)));p=u.get_items().sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),"function"==typeof t&&t.apply(null,[])},o=function(t){if(!UpdraftCentral_Library.is_dialog_opened()&&"inactive"!==udclion.shortcut_status){var e=t||window.event,t=t?t.which:e.keyCode,e=String.fromCharCode(t),i="",a=m("div#updraft-central-content").find("input, textarea").is(":focus"),n=m("div#updraftcentral_modal_dialog").find("input, textarea").is(":focus"),s=m("div.bootbox.modal").find("input, textarea").is(":focus"),o=!1;if((m("#classic_editor_container").is(":visible")||m("#gutenberg_editor_container").is(":visible"))&&(o=!0),!(a||n||s||o)){a="SHIFT",n=(17===t&&(i+="CTRL"),18===t&&(i+=i.length?"+ALT":"ALT"),16===t&&(i+=i.length?"+"+a:a),i.length?v+=v.length?"+"+i:i:e.length&&(v+=v.length?"+"+e:e),v.split("+"));if((1!==n.length||-1===m.inArray(n[0],["CTRL","ALT",a]))&&v.length){s=v.toLowerCase(),o=v.toUpperCase();if(-1!==s.indexOf("+")&&(s=(t=s.split("+"))[0].toUpperCase()+"+"+t[1]),(u.exists(s)||u.exists(o))&&!g){var r=u.exists(s)?u.item(s):u.item(o);if(g=!0,"function"==typeof r.action)r.action.apply(null,[r.name,r.menu]);else if("string"==typeof r.action&&r.action.length){i=UpdraftCentral.$site_row;if(void 0!==l[r.name]&&l[r.name]?i=m("div#updraft-central-content"):void 0!==i&&i||(e=m("div#updraftcentral_dashboard_existingsites > div.ui-sortable-handle").find(".updraftcentral_site_row:not(.suspended)").first()).length&&(i=UpdraftCentral.$site_row=e),void 0!==i&&i&&i.length){if(r.menu.length&&!r.action.length)return void m("#updraft-menu-item-"+r.menu).trigger("click");var d=i.find("#"+r.action),c=(!(void 0===d||!d.length)||!(void 0===(d=i.find("."+r.action))||!d.length)||(d=i.find(r.action)),i.find(".updraftcentral_row_extracontents"));if(void 0!==d&&d&&d.length){r.menu&&r.menu.length||(r.menu="sites");n=m(".updraft-menu-item-links-active").prop("id").replace("updraft-menu-item-","");if(r.menu===n){if(_&&void 0!==_.menu&&r.menu===_.menu&&_.site&&_.site.action_item){a=m(_.site.action_item);if(d.prop("class")===a.prop("class")&&!h.exists(r.key)&&c.find("div").html())return g=!1,void(_=null)}h.exists(r.key)&&c.html(""),d.trigger("click")}else m("#updraftcentral_dashboard_existingsites").on("updraftcentral_dashboard_mode_set_after",function(t,e){if(void 0!==d&&d&&d.length){if(m("#updraftcentral_dashboard_existingsites").off("updraftcentral_dashboard_mode_set_after"),_&&void 0!==_.menu&&r.menu===_.menu&&_.site&&_.site.action_item){var i=m(_.site.action_item);if(d.prop("class")===i.prop("class")&&!h.exists(r.key)&&c.find("div").html())return g=!1,void(_=null)}h.exists(r.key)&&c.html(""),d.trigger("click")}}),m("#updraft-menu-item-"+r.menu).trigger("click")}}}else r.menu.length&&m("#updraft-menu-item-"+r.menu).trigger("click");g=!1}v=""}}}},i=function(t,e){for(var a,n,i,s='<ul class="uc_shortcuts">',o=p,r=0;r<o.length;r++){var l,d=o[r],c=d.key,u='<span class="uc_current_shortcut">'+c+"</span>";f.is_macintosh&&(l=c.replace("CTRL","CONTROL").replace("ALT","OPTION"),u='<span class="uc_current_shortcut" style="display:none;">'+c+'</span><span class="uc_current_mac_shortcut">'+l+"</span>"),s+='<li data-name="'+d.name+'">'+d.description+" <span>("+udclion.shortcut_key+": "+u+')</span> <span class="uc_change_shortcut">'+udclion.keyboard_change_shortcut+'</span> <div class="uc_shortcut_elements"></div></li>'}s+="</ul>",void 0!==t&&t&&t.length?t.replaceWith(s):(a="shortcut_dialog_id",n=null,void 0!==e&&e&&(n=e.find("div.modal-dialog").offset(),i=!1),m("#updraftcentral_dashboard").on("updraftcentral_bootbox_dialog_opened",function(t,e,i){e===a&&n&&(i.find("div.modal-dialog").css({top:n.top}),i.scrollTop(0)),i.removeClass("fade")}),m("#updraftcentral_dashboard").on("updraftcentral_bootbox_dialog_closed",function(t,e,i){e===a&&(m("body").hasClass("modal-open")||m("body").addClass("modal-open"))}),UpdraftCentral_Library.dialog.alert("<h2>"+udclion.keyboard_shortcuts_heading+' <a class="uc_clear_local_shortcuts">('+udclion.reset_shortcuts+")</a></h2><p>"+udclion.keyboard_shortcuts_message+'</p><div class="uc_shortcuts_spacer"><div class="uc_shortcuts_spinner"></div></div><p>'+s+"</p>",function(){void 0!==e&&e&&e.removeClass("fade").show().scrollTop()},!1,a,i))},r=function(){UpdraftCentral.register_event_handler("click",".modal-dialog span.uc_change_shortcut",function(){for(var t=m(this).closest("li").find("div.uc_shortcut_elements"),e=["CTRL","ALT","SHIFT"],i="",a="",n=0;n<e.length;n++)a=e[n],f.is_macintosh&&(a=a.replace("CTRL","CONTROL").replace("ALT","OPTION")),i+='<option value="'+e[n]+'">'+a+"</option>";i='<select><option value="">'+udclion.keyboard_choose_modifiers+"</option>"+i+"</select> ";t.html(i+'<input type="text" maxlength="1" value="" /> <button class="btn btn-primary uc_save_shortcut">'+udclion.keyboard_save_shortcut+'</button> <button class="btn btn-primary uc_cancel_shortcut">'+udclion.keyboard_cancel_shortcut+'</button> <span class="uc_new_shortcut"></span>'),m(this).hide()}),UpdraftCentral.register_event_handler("click",".modal-dialog button.uc_save_shortcut",function(){var t,i,e,a,n,s,o=m(this).closest("li").find("div.uc_shortcut_elements"),r=o.find("select").val(),d=o.find('input[type="text"]').val(),c=o.parent().data("name");d&&d.length&&d.match(/^[a-zA-Z]$/g)?(t="+",(i=(r=void 0!==r&&r.length?r:t="")+t+d).length&&(e=!1,o.closest("ul.uc_shortcuts").find('li[name!="'+c+'"] span.uc_current_shortcut').each(function(){var t=m(this).html();if(i.toUpperCase()===t.toUpperCase())return e=!0,UpdraftCentral_Library.dialog.alert("<h2>"+udclion.keyboard_shortcut_exist_heading+"</h2><p>"+udclion.keyboard_shortcut_exist+"</p>"),!1}),e||(a=o.parent().find("span.uc_current_shortcut"),n=a.html(),u.exists(n)&&((s=u.item(n)).key=i,f.save_shortcut(c,s.key,o.parent()).then(function(t){var e;u.add(s.key,s),u.remove(n),a.html(s.key),f.is_macintosh&&(e=s.key.replace("CTRL","CONTROL").replace("ALT","OPTION"),a.siblings(".uc_current_mac_shortcut").html(e)),h.exists(n)&&(h.remove(n),h.add(i,!0))}).always(function(){o.parent().find("span.uc_change_shortcut").show(),o.html("")}))))):UpdraftCentral_Library.dialog.alert("<h2>"+udclion.keyboard_shortcut_required_heading+"</h2><p>"+udclion.keyboard_shortcut_required+"</p>")}),UpdraftCentral.register_event_handler("click",".modal-dialog button.uc_cancel_shortcut",function(){var t=m(this).closest("li");t.find("span.uc_change_shortcut").show(),t.find("div.uc_shortcut_elements").html("")}),UpdraftCentral.register_event_handler("change",".modal-dialog div.uc_shortcut_elements select",function(t){m(".modal-dialog").trigger("keyboard_shortcut_changed",[this])}),UpdraftCentral.register_event_handler("keyup",".modal-dialog div.uc_shortcut_elements input",function(t){var e=m(this).closest("li").find("div.uc_shortcut_elements");e.find('input[type="text"]').val().match(/^[a-zA-Z]$/g)?e.find("button.uc_save_shortcut").prop("disabled",!1):e.find("button.uc_save_shortcut").prop("disabled",!0),m(".modal-dialog").trigger("keyboard_shortcut_changed",[this])}),UpdraftCentral.register_event_handler("keyboard_shortcut_changed",".modal-dialog",function(t,e){var e=m(e).closest("li").find("div.uc_shortcut_elements"),i=e.find("span.uc_new_shortcut"),a=e.find("select").val(),n=e.find('input[type="text"]').val(),s="+",a=(a=void 0!==a&&a.length?a:s="")+(s=n&&n.length?s:"")+n;n&&n.length?n.match(/^[a-zA-Z]$/g)?i.html('<div class="uc_tip_wrapper">'+udclion.keyboard_new_shortcut+": "+a+"</div>"):i.html('<div class="uc_tip_wrapper">'+udclion.keyboard_invalid_key+"</div>"):(i.html(""),e.find("button.uc_save_shortcut").prop("disabled",!1))}),UpdraftCentral.register_event_handler("click","a.uc_clear_local_shortcuts",function(){var e=m(".bootbox.modal ul.uc_shortcuts"),t=m(".bootbox.modal div.uc_shortcuts_spinner");f.clear_shortcuts(t).then(function(t){void 0!==t.shortcuts&&(udclion.user_defined_shortcuts=t.shortcuts),f.init(function(){i(e)})})})},b=function(){for(var t=[{name:"show_comments",key:"C",description:udclion.show_comments,menu:"comments",action:"updraftcentral_site_comments_manage"},{name:"show_users",key:"U",description:udclion.show_users,menu:"users",action:"updraftcentral_site_users_manage"},{name:"show_analytics",key:"A",description:udclion.show_analytics,menu:"analytics",action:"updraftcentral_site_analytics_show"}],e=0;e<t.length;e++){var i,a=t[e];void 0===udclion.keyboard_shortcuts[a.name]&&a.menu.length&&m("#updraft-menu-item-"+a.menu).is(":visible")&&(i={name:a.name,key:a.key,description:a.description,menu:a.menu},f.register_shortcut(i,a.action,!0))}},w=function(){var t={name:"z_keyboard_shortcuts_help",key:"K",description:udclion.keyboard_shortcuts_help,menu:"",site_required:!1},t=(f.register_shortcut(t,function(t){i()},!0),{name:"site_update",key:"D",description:udclion.site_update,menu:"updates"});f.register_shortcut(t,function(t,e){var i=UpdraftCentral.$site_row,a=(e.length&&(m("#updraft-menu-item-"+e+".updraft-menu-item-links-active").length||m("#updraft-menu-item-"+e).trigger("click")),void 0!==i&&i||(i=m("div#updraftcentral_dashboard_existingsites > div.ui-sortable-handle:first-child").find(".updraftcentral_site_row")),"undefined"!=typeof($mass_updates_container=i.closest("#updraftcentral_dashboard_existingsites").find("#updates_container"))&&$mass_updates_container.length&&$mass_updates_container.remove(),i.find("button.updraftcentral_action_show_updates"));void 0!==a&&a.length&&(void 0!==e&&"updates"===e&&i.find(".updraftcentral_row_extracontents").html(""),a.trigger("click")),i.show(),i.closest(".ui-sortable-handle").show()},!0)}}function UpdraftCentral_Task_Progress(){function e(){var t,e;0!=d.length?void 0!==jQuery.ui&&"function"==typeof jQuery.ui.progressbar?(0===d.find("#uc_task_progress").length&&d.append('<div id="uc_task_progress"><div id="uc_task_progress_label">'+udclion.current_progress+': 0%</div><div id="uc_task_progress_bar"><div id="uc_task_progress_status"></div></div></div>'),(i=d.find("#uc_task_progress > div#uc_task_progress_bar")).is(":ui-progressbar")?(t=100%(e=parseInt(r.total_items)),(e=a.count()*parseInt(100/e)+t)<100&&(o=e,i.progressbar("option","value",e))):i.progressbar({max:100,value:0,change:function(){d.find("#uc_task_progress_label").text(udclion.current_progress+": "+i.progressbar("option","value")+"%")},complete:function(){clearInterval(n)}})):console.log("UpdraftCentral_Task_Progress: jQuery progressbar or one of its dependency is not installed - exiting"):console.log("UpdraftCentral_Task_Progress: Progress bar container not defined - exiting")}var i,a,n,s,o,r=this,d=d||"";this.total_items,this.label,void 0!==d?(r.total_items=0,a=new UpdraftCentral_Collection,o=s=0):console.log("UpdraftCentral_Task_Progress: A container element is required. This is where the progress bar is to be appended - exiting");this.set_custom_status=function(t){var e=d.find("#uc_task_progress_status");0!=e.length&&void 0!==t&&t&&e.text(t)},this.set_complete=function(t){var e=d.find("#uc_task_progress_status");0!=e.length&&(o=100,i.progressbar("option","value",o),void 0!==t?e.text(t):e.text(udclion.process_completed))},this.update=function(){a.count()&&e()},this.set_current_label=function(t,e){var i=d.find("#uc_task_progress_status");0!=i.length&&a.add(t,t)&&(r.label=t,void 0!==e&&e?i.text(t):i.text(udclion.processing+' "'+r.label+'" ...'))},this.set_container=function(t){void 0!==n&&clearInterval(n),d=t,e()},this.start=function(){var t,e;0!=d.find("#uc_task_progress").length&&(e=100%(t=parseInt(r.total_items)),s=a.count()*parseInt(100/t)+e,n=setInterval(function(){o<s&&o<99?i.progressbar("option","value",++o):clearInterval(n)},1e3))},this.end=function(){r.reset()},this.abort=function(t){var e=d.find("#uc_task_progress_status");0!=e.length&&(clearInterval(n),void 0!==t?e.text(t):e.text(udclion.process_aborted))},this.reset=function(){var t=d.find("#uc_task_progress");0!=t.length&&(clearInterval(n),total_items=0,a.clear(),o=s=0,t.remove())},this.clear=function(){clearInterval(n),total_items=0,a.clear(),o=s=0},this.hide=function(){var t=d.find("#uc_task_progress");0!=t.length&&t.hide()},this.show=function(){var t=d.find("#uc_task_progress");0!=t.length&&t.show()}}function UpdraftCentral_Collection(){var i=this,a=0,n={};this.add=function(t,e){return!i.exists(t)&&(n[t]=e,a++,!0)},this.update=function(t,e){return i.exists(t)?(n[t]=e,!0):i.add(t,e)},this.bulk_update=function(t){for(var e in t)i.update(e,t[e])},this.remove=function(t){return!!i.exists(t)&&(delete n[t],a--,!0)},this.item=function(t){return n[t]},this.keys=function(){var t,e=[];for(t in n)e.push(t);return e},this.exists=function(t){return void 0!==n[t]},this.clear=function(){a=0,n={}},this.count=function(){return a},this.get_items=function(){var t,e=[];for(t in n)e.push(n[t]);return e},this.get_collection_object=function(){return n}}function UpdraftCentral_Tasks_Runner(s){function o(t,e){t.func.apply(null,t.args).then(function(t){e(null,t)}).fail(function(t){e(void 0===t?!0:t)})}var r=this,s=s||{},d=(this.progress,new UpdraftCentral_Collection);r.progress=new UpdraftCentral_Task_Progress;this.tasks_count=function(){return d.count()},this.remove_task=function(t){return d.remove(t)},this.add_task=function(t,e){if("function"==typeof t){var i=(new Date).getTime(),a=Math.ceil(1e3*Math.random()),i=UpdraftCentral_Library.md5("_key_"+i+a),a={func:t,args:e};if(a.args.push(r),d.add(i,a))return i}return!1},this.clear_tasks=function(){r.progress.clear(),d.clear()},this.abort=function(){queue.abort(),r.clear_tasks()},this.process_tasks=function(){var i=jQuery.Deferred();if(0<d.count()){r.progress.total_items=d.count(),t=void 0!==s.concurrency?d3.queue(s.concurrency):d3.queue();for(var t,e=d.keys(),a=0;a<e.length;a++){var n=d.item(e[a]);t.defer(o,n)}t.awaitAll(function(t,e){t?i.reject(t):i.resolve(e)})}else i.reject(udclion.tasks_queue_empty);return i.promise()}}function UpdraftCentral_Credentials(){var l=new UpdraftCentral_Collection,u=jQuery("#updraftcentral_modal_dialog"),p="hidden.bs.modal",o=(this.get_credentials=function(a){var n=jQuery.Deferred(),t=a.site_row,e=a.id;if(l.exists(e)){var s,i,o,r=l.item(e),d=r.request_filesystem_credentials||{},c=!1;for(i in d)d[i]&&(c=!0,s=i);void 0===r.site_credentials?c?(o=UpdraftCentral.storage_get("filesystem_credentials_"+a.site_hash),e=UpdraftCentral.get_site_heading(t),UpdraftCentral.open_modal(udclion.updates.connection_information,UpdraftCentral.template_replace("updates-request-credentials",{credentials_form:r.filesystem_form,site_heading:e}),function(){var e=jQuery("#updraftcentral_modal #filesystem-credentials-save-in-browser").is(":checked"),i=jQuery("#updraftcentral_modal .request-filesystem-credentials-dialog-content input").serialize();_(t,s,i).then(function(t){r.site_credentials=i,a.site_credentials=i,e&&(a.save_credentials_in_browser=!0),n.resolve(a)}).fail(function(t,e,i){0<UpdraftCentral.get_debug_level()&&(console.log("Failed result follows for 'validate_remote_credentials' method called within UpdraftCentral_Credentials.get_credentials:"),console.log(t)),UpdraftCentral_Library.dialog.alert("<h2>"+udclion.failed_credentials_heading+"</h2><p>"+udclion.failed_credentials+"</p>"),n.reject(t,e,i)}).always(function(){u.off(p),UpdraftCentral.close_modal()})},udclion.updates.update,function(){jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[value=""]:first').trigger("focus"),o&&(saved_credentials=UpdraftCentral_Library.unserialize(o))&&(jQuery.each(saved_credentials,function(t,e){var i=jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[name="'+t+'"]').attr("type");"text"==i||"number"==i||"password"==i?jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[name="'+t+'"]').val(e):"checkbox"==i?e?jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[name="'+t+'"]').prop("checked",!0):jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[name="'+t+'"]').prop("false",!0):"radio"==i?jQuery('#updraftcentral_modal .request-filesystem-credentials-dialog-content input[name="'+t+'"][value="'+e+'"]').prop("checked",!0):i&&console.log("UpdraftCentral: unrecognised field type in credential form: type="+i+", field index="+t)}),jQuery("#updraftcentral_modal #filesystem-credentials-save-in-browser").prop("checked",!0)),jQuery('#updraftcentral_modal div#request-filesystem-credentials-form fieldset > legend:contains("Connection Type"):gt(0)').hide(),u.on(p,function(){n.reject()})},!0,"",function(){n.reject()})):n.reject(a):(a.site_credentials=r.site_credentials,n.resolve(a))}else n.reject(a);return n.promise()},this.load_credentials=function(t){var a=jQuery.Deferred(),e=t.id,t=t.site_row;return void 0!==e?l.exists(e)?a.resolve(l.item(e)):o(t).then(function(t){l.add(e,t),a.resolve(t)}).fail(function(t,e,i){a.reject(t,e,i)}):a.reject(),a.promise()},this.load_all_credentials=function(t){var e=jQuery.Deferred(),i=[];if(void 0!==t&&0<t.length){for(var a=0;a<t.length;a++){var n=t[a],s=n.site_row;i.push(o(s).then(function(t){var e=n.id;void 0!==e&&l.add(e,t)}))}jQuery.when.apply(jQuery,i).then(function(){e.resolve()})}return e.promise()},function(t){var a=jQuery.Deferred(),e=function(t){t=UpdraftCentral.get_cached_response(t,"updates.get_updates");if(null!==t&&UpdraftCentral.is_data_good_to_use(t.created)){t=t.reply.data;if(t.hasOwnProperty("meta")&&t.meta)return t.meta}return!1}(t.data("site_id"));return!1!==e?a.resolve(e):UpdraftCentral.send_site_rpc("core.get_credentials",null,t,function(t,e,i){if("ok"!==e||!t)return a.reject(t,e,i),!0;a.resolve(t.data)}),a.promise()}),_=function(t,e,i){var a=jQuery.Deferred();return UpdraftCentral.send_site_rpc("core.validate_credentials",{entity:e,filesystem_credentials:i},t,function(t,e,i){"ok"!==e||t.data.error?a.reject(t,e,i):a.resolve(t.data)}),a.promise()}}function UpdraftCentral_Site(t){var i=this;this.id,this.site_description,this.site_url,this.site_hash,this.site_row=t,this.save_credentials_in_browser,this.site_credentials,this.credentials_required,this.automatic_backups,this.autobackup_options,this.autobackup_requested,this.autobackup_complete,this.updates,this.update_requests,this.update_processing,this.additional_options,this.mass_update,this.update_queue;i.id=i.site_row.data("site_id"),i.site_description=i.site_row.data("site_description"),i.site_url=i.site_row.data("site_url"),i.site_hash=UpdraftCentral_Library.md5(i.id+"_"+i.site_row.data("site_url")),i.save_credentials_in_browser=!1,i.site_credentials=!1,i.credentials_required=!1,i.automatic_backups=!1,i.autobackup_options={},i.autobackup_requested=!1,i.autobackup_complete=!1,i.backup_completed=!1,i.updates={plugin:new UpdraftCentral_Collection,theme:new UpdraftCentral_Collection,core:new UpdraftCentral_Collection,translation:new UpdraftCentral_Collection},i.update_requests=new UpdraftCentral_Queue,i.update_processing=!1,i.mass_update=!1,i.update_queue=new UpdraftCentral_Collection,this.get_update_info=function(t,e){return!!i.updates[t].exists(e)&&i.updates[t].item(e)}}function UpdraftCentral_Queueable_Modal(t){var i=!1,e=t||jQuery("#updraftcentral_modal_dialog"),a=function(){void 0!==e?e.on(s,function(){var t;n.is_empty()?(i=!0,e.off(s),n.unlock()):void 0!==(t=n.dequeue())&&o(t)}):console.log("UpdraftCentral_Queueable_Modal: Modal element does not exist.")},n=new UpdraftCentral_Queue,s="hidden.bs.modal",o=(a(),function(t){UpdraftCentral.open_modal(t.title,t.body,t.action_button_callback,t.action_button_text,t.pre_open_callback,t.sanitize_body,t.extra_classes)});this.load=function(){var t;n.is_empty()||!n.get_lock()||void 0!==(t=n.dequeue())&&o(t)},this.open=function(t,e){void 0!==e&&e?n.is_locked()||(n.enqueue(t),!n.is_empty()&&i&&(a(),i=!1)):o(t)},this.close=function(){UpdraftCentral.close_modal()},this.get_queue_item_count=function(){return n.get_length()}}function Fn_UpdraftCentral_Library(){this.dialog={};function n(t){var a=jQuery.Deferred();return UpdraftCentral.send_ajax("manage_site_meta",t,null,"via_mothership_encrypting",null,function(t,e,i){"ok"==e&&void 0!==t.data?a.resolve(t.data):a.reject(t.message)}),a.promise()}function s(t,e){c.fullscreen.isFullScreen()&&c(".bootbox.modal").appendTo("#updraftcentral_dashboard"),c(".bootbox.modal").on("click","a",function(t){var e=c(this).attr("href");"function"==typeof redirect_updraft_website_links&&redirect_updraft_website_links(e,t)}),c(".bootbox.modal .updraftcentral_site_editdescription").on("click",function(t){t.preventDefault(),c(this).closest(".modal").modal("hide"),open_site_configuration(UpdraftCentral.$site_row)}),c(".bootbox.modal .updraftcentral_test_other_connection_methods").on("click",function(t){t.preventDefault(),c(this).closest(".modal").modal("hide"),open_connection_test(UpdraftCentral.$site_row)}),c(".bootbox.modal").data("id",t),c(".bootbox.modal.bootbox-alert, .bootbox.modal.bootbox-confirm, .bootbox.modal.bootbox-prompt").find('button[data-dismiss="modal"], button[data-bb-handler="ok"], button[data-bb-handler="cancel"], button[data-bb-handler="confirm"]').off("click").on("click",function(){o.exists(t)&&o.remove(t),c("#updraftcentral_dashboard").trigger("updraftcentral_dialog_closed")}),c(".bootbox.modal").on("hidden.bs.modal",function(){o.exists(t)&&o.remove(t),c("#updraftcentral_dashboard").trigger("updraftcentral_dialog_closed")}),void 0!==e&&e&&(e.on("shown.bs.modal",function(){c("#updraftcentral_dashboard").trigger("updraftcentral_bootbox_dialog_opened",[t,e])}),e.on("hidden.bs.modal",function(){c("#updraftcentral_dashboard").trigger("updraftcentral_bootbox_dialog_closed",[t,e])})),c("#updraftcentral_dashboard").trigger("updraftcentral_dialog_opened")}var c=jQuery,o=new UpdraftCentral_Collection;this.is_numeric=function(t){return"number"==typeof t||"string"==typeof t&&(!isNaN(t)&&!isNaN(parseFloat(t)))},this.parseBool=function(t){return t="boolean"!=typeof(t="number"==typeof(t="number"==typeof(t="string"!=typeof(t="string"!=typeof t||"true"!=t.toLowerCase()&&"1"!=t?t:!0)||"false"!=t.toLowerCase()&&"0"!=t?t:!1)&&1==t?!0:t)&&0==t?!1:t)?!1:t},this.sort=function(t,i,a){if(Array.isArray(t)&&"string"==typeof i)return void 0===a&&(a="asc"),t.sort(function(t,e){return"object"==typeof t&&t.hasOwnProperty(i)&&"object"==typeof e&&e.hasOwnProperty(i)?(t=t[i].toString().toLowerCase(),e=e[i].toString().toLowerCase(),"desc"===a?e<t?-1:t<e?1:0:t<e?-1:e<t?1:0):0}),t},this.filter=function(t,o,r,d){if(Array.isArray(t)&&Array.isArray(o)&&"string"==typeof r)return c.grep(t,function(t){for(var e=[],i=0;i<o.length;i++){var a=o[i];"object"==typeof t&&t.hasOwnProperty(a)&&e.push(t[a].toString())}if(e.length){if(void 0===d||!d){if(1===e.length&&-1==e[0].indexOf(",")&&r.length)return e[0].toLowerCase()===r.toLowerCase();for(var n=!1,i=0;i<e.length;i++){var s=e[i];if(s.toLowerCase()===r.toLowerCase()){n=!0;break}if(-1!==s.toLowerCase().indexOf(r.toLowerCase())){n=!0;break}}return n}if(e.length===o.length)return!0}return!1})},this.enable_actions=function(t){c(t=void 0!==t&&t?t:".updraftcentral_row_extracontents").find("input, button, select, a").prop("disabled",!1).removeClass("disabled_cursor")},this.disable_actions=function(t,e){t=void 0!==t&&t?t:".updraftcentral_row_extracontents";var i="";void 0!==e&&Array.isArray(e)&&e.length&&(i=e.join(",")),c(t).find("input, button, select, a").not(i).prop("disabled",!0).addClass("disabled_cursor")},this.is_dialog_opened=function(){return!(!c("div.bootbox.modal").is(":visible")&&!c("div#updraftcentral_modal_dialog").is(":visible"))},this.add_site_meta=function(t,e,i,a){return n({action:"add",site_id:t,meta_key:e,meta_value:i,unique:a=void 0===a?!1:a})},this.delete_site_meta=function(t,e,i){return n({action:"delete",site_id:t,meta_key:e,meta_value:i=void 0===i?"":i})},this.get_site_meta=function(t,e,i){return n({action:"get",site_id:t,key:e=void 0===e?"":e,single:i=void 0===i?!1:i})},this.update_site_meta=function(t,e,i,a){return n({action:"update",site_id:t,meta_key:e,meta_value:i,prev_value:a=void 0===a?"":a})};this.ucfirst=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},this.open_connection_test=function(e){var a,i=UpdraftCentral.get_contact_url(e),n=e.data("site_id"),s=e.data("connection_method");"via_mothership_encrypting"!=s?(a="direct_jquery_auth"==s||"direct_default_auth"==s||"direct_default_auth"==s?"direct":s,UpdraftCentral.open_modal(udclion.test_connection_methods,UpdraftCentral.template_replace("sites-connection-test",{site_url:i}),!0,!1,function(){var t=!0;(t="https:"==document.location.protocol&&"http:"==i.substring(0,5).toLowerCase()?!1:t)?(c("#updraftcentral_modal .connection-test-direct .connection-test-result").html(""),UpdraftCentral.send_ajax("ping",null,e,"direct_default_auth","#updraftcentral_modal .connection-test-direct .connection-test-result",function(t,e,i){0<UpdraftCentral.get_debug_level()&&(console.log("Result follows for 'direct_default_auth' method:"),console.log(t)),"ok"==e?(t='<span class="connection-test-succeeded">'+udclion.succeeded+"</span> ",t+="direct"==a?udclion.current_method+" "+udclion.best_method+" "+udclion.recommend_keep:udclion.best_method+" "+udclion.recommend_use+' <a href="#" class="connection-test-switch" data-site_id="'+n+'" data-connection_method="direct_default_auth">'+udclion.switch_to+"...</a>",c("#updraftcentral_modal .connection-test-direct .connection-test-result").html(t)):c("#updraftcentral_modal .connection-test-direct .connection-test-result").html('<span class="connection-test-failed">'+udclion.failed+" ("+i+")</span>")},30,!1)):c("#updraftcentral_modal .connection-test-direct .connection-test-result").html(udclion.not_possible_browser_restrictions),c("#updraftcentral_modal .connection-test-via_mothership .connection-test-result").html(""),UpdraftCentral.send_ajax("ping",null,e,"via_mothership","#updraftcentral_modal .connection-test-via_mothership .connection-test-result",function(t,e,i){c("#updraftcentral_modal .connection-test-via_mothership .connection-test-result").html(e),0<UpdraftCentral.get_debug_level()&&(console.log("Result follows for 'via_mothership' method:"),console.log(t)),"ok"==e?(e='<span class="connection-test-succeeded">'+udclion.succeeded+"</span> ",e+="via_mothership"!=s?'<a href="#" class="connection-test-switch" data-site_id="'+n+'" data-connection_method="via_mothership">'+udclion.switch_to+"...</a>":udclion.current_method,c("#updraftcentral_modal .connection-test-via_mothership .connection-test-result").html(e)):("unexpected_http_code"==(e=i)&&(null!=t&&t.hasOwnProperty("data")&&null!=t.data&&t.data.hasOwnProperty("response")&&t.data.response.hasOwnProperty("code")&&(e+=" - "+t.data.response.code),null!=t&&t.hasOwnProperty("data")&&null!=t.data&&t.data.hasOwnProperty("response")&&t.data.response.hasOwnProperty("message")&&(e+=" - "+t.data.response.message)),c("#updraftcentral_modal .connection-test-via_mothership .connection-test-result").html('<span class="connection-test-failed">'+udclion.failed+" ("+e+")</span>"))},30,!1),c("#updraftcentral_modal .connection-test-via_mothership_encrypting .connection-test-result").html(""),UpdraftCentral.send_ajax("ping",null,e,"via_mothership_encrypting","#updraftcentral_modal .connection-test-via_mothership_encrypting .connection-test-result",function(t,e,i){0<UpdraftCentral.get_debug_level()&&(console.log("Result follows for 'via_mothership_encrypting' method:"),console.log(t)),"ok"==e?(e='<span class="connection-test-succeeded">'+udclion.succeeded+"</span> ",e+="via_mothership_encrypting"!=s?'<a href="#" class="connection-test-switch" data-site_id="'+n+'" data-connection_method="via_mothership_encrypting">'+udclion.switch_to+"...</a>":udclion.current_method,c("#updraftcentral_modal .connection-test-via_mothership_encrypting .connection-test-result").html(e)):("unexpected_http_code"==(e=i)&&(null!=t&&t.hasOwnProperty("data")&&null!=t.data&&t.data.hasOwnProperty("response")&&t.data.response.hasOwnProperty("code")&&(e+=" - "+t.data.response.code),null!=t&&t.hasOwnProperty("data")&&null!=t.data&&t.data.hasOwnProperty("response")&&t.data.response.hasOwnProperty("message")&&(e+=" - "+t.data.response.message)),c("#updraftcentral_modal .connection-test-via_mothership_encrypting .connection-test-result").html('<span class="connection-test-failed">'+udclion.failed+" ("+e+")</span>"))},30,!1)},!0,"modal-lg")):UpdraftCentral_Library.dialog.alert("<h2>"+udclion.test_connection_methods+"</h2><p>"+udclion.test_not_possible_in_current_mode+"</p>")},this.dialog.alert=function(t,e,i,a,n){(i="undefined"==i||i)&&(t=this.sanitize_html(t));i=void 0!==a?a:UpdraftCentral_Library.md5("_alert_"+t);o.exists(i)||(o.add(i,!0),a=bootbox.alert({message:t,callback:e,backdrop:n}),s(i,a))},this.dialog.confirm=function(t,e,i,a){i=void 0!==i&&i?i:UpdraftCentral_Library.md5("_confirm_"+t);o.exists(i)||(o.add(i,!0),t={message:t,callback:e},void 0!==a&&a&&(e={confirm:{label:udclion.ok},cancel:{label:udclion.cancel}},a.hasOwnProperty("confirm")&&a.confirm&&(e.confirm.label=a.confirm),a.hasOwnProperty("cancel")&&a.cancel&&(e.cancel.label=a.cancel),t.buttons=e),a=bootbox.confirm(t),s(i,a))},this.dialog.prompt=function(t,e,i,a){a=void 0!==a?a:UpdraftCentral_Library.md5("_prompt_"+t);o.exists(a)||(o.add(a,!0),t=bootbox.prompt({title:t,value:e,callback:i}),s(a,t))},this.dialog.custom=function(t,e,i){e=void 0!==e&&e?e:UpdraftCentral_Library.md5("_custom_"+t);o.exists(e)||(o.add(e,!0),t=bootbox.dialog({message:t,backdrop:"static",closeButton:!0,buttons:i}),s(e,t))},this.md5=function(t){var e=forge.md.md5.create();return e.update(t),e.digest().toHex()},this.sanitize_html=function(t){return html_sanitize.sanitize(t,function(t){if(/^https?:\/\//.test(t))return t},function(t){return t})},this.escape_attrib=function(t){return html_sanitize.escapeAttrib(t)},this.quote_attribute=function(t,e){return e=e?"&#13;":"\n",(""+t).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,e).replace(/[\r\n]/g,e)},this.open_browser_at=function(t,e,i){e=void 0!==e?e:null,i=void 0===i?t:i,UpdraftCentral.send_site_rpc("core.get_login_url",e,t,function(t,e,i){"ok"==e&&!1!==t&&t.hasOwnProperty("data")&&(e=t.data.login_url,t=window.open(e,"_blank"),UpdraftCentral_Library.focus_window_or_error(t))},i)},this.focus_window_or_error=function(t){null!=t?t instanceof jQuery?t.trigger("focus"):t.focus():this.dialog.alert("<h2>"+udclion.open_new_window+"</h2>"+udclion.window_may_be_blocked)},this.toggle_fullscreen=function(){c.fullscreen.isFullScreen()?(c("footer").show(),c.fullscreen.exit(),c("#updraftcentral_modal_dialog").appendTo(document.body)):(c("footer").hide(),c("#updraftcentral_dashboard").parent().fullscreen({toggleClass:"updraft-fullscreen"}),c("#updraftcentral_modal_dialog").appendTo("#updraftcentral_dashboard"))},this.unserialize=function(t){for(var e,i,a=decodeURI(t).split("&"),n={},s=0,o=a.length;s<o;s++)void 0===n[i=(e=a[s].split("="))[0]]?n[i]=unescape(e[1]):("string"==typeof n[i]&&(n[i]=[n[i]]),n[i].push(unescape(e[1])));return n},this.get_serialized_options=function(t){var i=c(t).serialize();return c.each(c(t+" input[type=checkbox]").filter(function(t){return 0==c(this).prop("checked")}),function(t,e){i+="&"+c(e).attr("name")+"=0"}),i},this.download_inner_html=function(t,e,i){i=i||"text/plain";var e=document.getElementById(e).innerHTML,a=document.body.appendChild(document.createElement("a"));a.setAttribute("download",t),a.setAttribute("style","display:none;"),a.setAttribute("href","data:"+i+";charset=utf-8,"+encodeURIComponent(e)),a.click()}}jQuery(function(t){window.UpdraftCentral_Library=new Fn_UpdraftCentral_Library});