!function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(r,n,function(t){return e[t]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=36)}({0:function(e,t,r){e.exports=r(15)},1:function(e,t,r){var n=r(11),a=r(12),i=r(13),o=r(14);e.exports=function _toConsumableArray(e){return n(e)||a(e)||i(e)||o()},e.exports.__esModule=!0,e.exports.default=e.exports},10:function(e,t){function _typeof(t){return e.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,_typeof(t)}e.exports=_typeof,e.exports.__esModule=!0,e.exports.default=e.exports},11:function(e,t,r){var n=r(9);e.exports=function _arrayWithoutHoles(e){if(Array.isArray(e))return n(e)},e.exports.__esModule=!0,e.exports.default=e.exports},12:function(e,t){e.exports=function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports},13:function(e,t,r){var n=r(9);e.exports=function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports},14:function(e,t){e.exports=function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports},15:function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function define(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{define({},"")}catch(e){define=function(e,t,r){return e[t]=r}}function wrap(e,t,r,n){var a=t&&t.prototype instanceof Generator?t:Generator,i=Object.create(a.prototype),o=new Context(n||[]);return i._invoke=function makeInvokeMethod(e,t,r){var n="suspendedStart";return function invoke(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return doneResult()}for(r.method=a,r.arg=i;;){var o=r.delegate;if(o){var u=maybeInvokeDelegate(o,r);if(u){if(u===s)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=tryCatch(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===s)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(e,r,o),i}function tryCatch(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=wrap;var s={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var u={};define(u,a,(function(){return this}));var l=Object.getPrototypeOf,c=l&&l(l(values([])));c&&c!==t&&r.call(c,a)&&(u=c);var d=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(u);function defineIteratorMethods(e){["next","throw","return"].forEach((function(t){define(e,t,(function(e){return this._invoke(t,e)}))}))}function AsyncIterator(e,t){var n;this._invoke=function enqueue(a,i){function callInvokeWithMethodAndArg(){return new t((function(n,o){!function invoke(n,a,i,o){var s=tryCatch(e[n],e,a);if("throw"!==s.type){var u=s.arg,l=u.value;return l&&"object"==typeof l&&r.call(l,"__await")?t.resolve(l.__await).then((function(e){invoke("next",e,i,o)}),(function(e){invoke("throw",e,i,o)})):t.resolve(l).then((function(e){u.value=e,i(u)}),(function(e){return invoke("throw",e,i,o)}))}o(s.arg)}(a,i,n,o)}))}return n=n?n.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,maybeInvokeDelegate(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=tryCatch(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function pushTryEntry(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function resetTryEntry(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function Context(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(pushTryEntry,this),this.reset(!0)}function values(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function next(){for(;++n<e.length;)if(r.call(e,n))return next.value=e[n],next.done=!1,next;return next.value=void 0,next.done=!0,next};return i.next=i}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(d,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===GeneratorFunction||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,GeneratorFunctionPrototype):(e.__proto__=GeneratorFunctionPrototype,define(e,o,"GeneratorFunction")),e.prototype=Object.create(d),e},e.awrap=function(e){return{__await:e}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,i,(function(){return this})),e.AsyncIterator=AsyncIterator,e.async=function(t,r,n,a,i){void 0===i&&(i=Promise);var o=new AsyncIterator(wrap(t,r,n,a),i);return e.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},defineIteratorMethods(d),define(d,o,"Generator"),define(d,a,(function(){return this})),define(d,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function next(){for(;t.length;){var r=t.pop();if(r in e)return next.value=r,next.done=!1,next}return next.done=!0,next}},e.values=values,Context.prototype={constructor:Context,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function handle(r,n){return i.type="throw",i.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return handle("end");if(a.tryLoc<=this.prev){var o=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(o&&s){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0);if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return handle(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return handle(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var i=a;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),resetTryEntry(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;resetTryEntry(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:values(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}(e.exports);try{regeneratorRuntime=n}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}},2:function(e,t){function asyncGeneratorStep(e,t,r,n,a,i,o){try{var s=e[i](o),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}e.exports=function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var i=e.apply(t,r);function _next(e){asyncGeneratorStep(i,n,a,_next,_throw,"next",e)}function _throw(e){asyncGeneratorStep(i,n,a,_next,_throw,"throw",e)}_next(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},36:function(e,t,r){"use strict";r.r(t);var n,a,i=r(4);r(70);document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll(".kaliforms-form-container");Array.prototype.forEach.call(e,(function(e){new i.a(e)}))}),!1),(null!==(n=window)&&void 0!==n&&n.CTCommonDirectives||null!==(a=window)&&void 0!==a&&a.CTFrontendBuilder)&&jQuery(document).ready((function(){var e=document.querySelectorAll(".kaliforms-form-container");Array.prototype.forEach.call(e,(function(e){new i.a(e)}))})),"undefined"!=typeof wp&&wp.hasOwnProperty("customize")&&wp.customize.bind("preview-ready",(function(){var e=document.querySelectorAll(".kaliforms-form-container");Array.prototype.forEach.call(e,(function(e){new i.a(e)}))})),window.KFP=i.a},4:function(e,t,r){"use strict";r.d(t,"a",(function(){return A}));var n=r(10),a=r.n(n),i=r(1),o=r.n(i),s=r(2),u=r.n(s),l=r(5),c=r.n(l),d=r(6),h=r.n(d),p=r(7),f=r.n(p),m=r(0),y=r.n(m),v=(wp.i18n.__,{gatherProducts:function gatherProducts(){var e=this;return u()(y.a.mark((function _callee(){var t;return y.a.wrap((function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return t={action:"kaliforms_form_verify_products",data:{formId:e.formId,nonce:KaliFormsObject.ajax_nonce}},r.abrupt("return",e.axios.post(KaliFormsObject.ajaxurl,e.Qs.stringify(t)).then((function(t){e._products="ok"===t.data.response?[]:t.data.response,e.form.dispatchEvent(new CustomEvent("kaliFormProductsGathered",{detail:e}))})).catch((function(e){console.log(e)})));case 2:case"end":return r.stop()}}),_callee)})))()},getCart:function getCart(){var e=this,t=0,r="USD",n=[];return void 0===this._products||this._products.map((function(a){if(e._payee=void 0!==a.payee?a.payee:null,"donation"===a.type){var i=document.querySelector('[data-internal-id="'.concat(a.internalId.toLowerCase(),'"]'));if(null===i)return void(t+=0);if(""===i.value)return void(t+=0);t+=parseFloat(i.value)>0?parseFloat(i.value):0,n.push(a.caption)}"product"===a.type&&(t+=parseFloat(a.price),n.push(a.caption)),"multipleProducts"===a.type&&e.isSelectedPrice(a)&&(t+=parseFloat(a.price),n.push(a.variant)),r=a.currency})),{price:t.toFixed(2),description:n.join("\n"),currency:r}},isSelectedPrice:function isSelectedPrice(e){var t=o()(document.querySelectorAll('[data-internal-id="'.concat(e.internalId.toLowerCase(),'"]')));return!!t.length&&(void 0!==t.find((function(e){return e.checked}))&&(t.find((function(e){return e.checked})).value===e.id||void 0))},onApprove:function onApprove(e,t){var r=this;return u()(y.a.mark((function _callee3(){return y.a.wrap((function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return r.loading=!0,e.abrupt("return",t.order.capture().then(function(){var e=u()(y.a.mark((function _callee2(e){return y.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:if(!r.hasOwnProperty("_logPayPalIntent")){t.next=3;break}return t.next=3,r._logPayPalIntent(e);case 3:r.payments={payment_id:e.id,provider:"paypal"},r.form.dispatchEvent(new Event("submit",{cancelable:!0}));case 5:case"end":return t.stop()}}),_callee2)})));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}}),_callee3)})))()},createOrder:function createOrder(e,t){var r=this.getCart(),n={purchase_units:[{amount:{value:r.price,currency_code:r.currency},description:r.description}]};return null!==this._payee&&(n.purchase_units[0].payee={email_address:this._payee}),t.order.create(n)},onInit:function onInit(e,t){var r=this;this.valid&&this.form.checkValidity()?t.enable():t.disable(),this.form.addEventListener("change",(function(e){r.valid&&r.form.checkValidity()?t.enable():t.disable()}))},onClick:function onClick(e,t){o()(this.formElements).map((function(e){e.reportValidity()})),this.valid||this.throwError()},handlePayPalPayment:function handlePayPalPayment(e){var t=this;return u()(y.a.mark((function _callee4(){return y.a.wrap((function _callee4$(r){for(;;)switch(r.prev=r.next){case 0:if("function"==typeof e.Buttons){r.next=2;break}return r.abrupt("return");case 2:if(t.createOrder=t.createOrder.bind(t),t.onApprove=t.onApprove.bind(t),t.onInit=t.onInit.bind(t),t.onClick=t.onClick.bind(t),t.paypalObject=e.Buttons({onInit:t.onInit,onClick:t.onClick,createOrder:t.createOrder,onApprove:t.onApprove}),!t.conditionalFields){r.next=9;break}return r.abrupt("return");case 9:t.paypalObject.render("#kaliforms-paypal-button-container");case 10:case"end":return r.stop()}}),_callee4)})))()},_getPaymentMethodChooser:function _getPaymentMethodChooser(e){if(!window.hasOwnProperty("KaliFormConditionalLogic"+this.formId))return null;var t="KaliFormConditionalLogic"+this.formId,r=window[t].find((function(t){return e.includes(t.field.replace(/[0-9]/g,""))}));return void 0===r?null:document.querySelector('[data-internal-id="'.concat(r.conditioner,'"]'))},_getPaymentMethodTranslated:function _getPaymentMethodTranslated(e){var t="KaliFormConditionalLogic"+this.formId,r=window[t].find((function(t){return e===t.value}));return void 0!==r?r.field.replace(/[0-9]/g,""):null}});function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){c()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=wp.i18n,g=b.__,sprintf=b.sprintf,_=window.KaliExports,k=_.axios,w=_.Qs,x=_.maskInput,A=function(){function FormProcessor(e){h()(this,FormProcessor),this.attachInitialLoadevent(),this.id=e.getAttribute("id"),this.style=e.getAttribute("data-form-style"),this.formId=parseInt(e.getAttribute("data-form-id")),this.form=e,this.formElements=this.form.elements,this.uploadFields=[],this.editors=[],this.checkboxes={},this.choices=[],this.datePickers=[],this.nonce=KaliFormsObject.ajax_nonce,this.globalErrorMessage=this.errorMessage,this.submitButton=this.form.querySelector("input[type=submit]"),this.preFlightNeeded="0"!==KaliFormsObject.akismetEnabled,this.axios=k,this.Qs=w,this.checkHoneypot(),this.enableStyling(),this.handleCheckboxes(),this.determineDatePickers(),this.handleEditors(),this.handleInputMasks(),this.handleFileUploads(),this.handleRecaptcha(),this.handleSubmit(),this.verifyAndStartPayments(),document.dispatchEvent(new CustomEvent("kaliFormProcessConstructed",{detail:this}))}var e,t,r,n,i,s,l,c;return f()(FormProcessor,[{key:"initialLoaded",get:function get(){return this._initialLoaded},set:function set(e){return e&&this.form.classList.add("fade-in-bck"),this._initialLoaded=e}},{key:"loading",get:function get(){return this._loading},set:function set(e){this._loading=e,e?this.appendLoader():this.removeLoader()}},{key:"errorMessage",get:function get(){return document.getElementById("kaliforms-global-error-message-".concat(this.formId)).innerText},set:function set(e){this._errorMessage=e,document.getElementById("kaliforms-global-error-message-".concat(this.formId)).innerText=e}},{key:"valid",get:function get(){var e=this,t={formValidation:!0};if(this.grecaptcha&&((t=_objectSpread(_objectSpread({},t),{},{recaptcha:this.grecaptchaValidation})).recaptcha||(this.errorMessage=g("Please complete recaptcha challenge","kaliforms"))),this.editors.length&&this.editors.map((function(e){"true"===e.getAttribute("data-was-required")&&""===e.value&&(t.formValidation=!1)})),this.hasOwnProperty("digitalSignatures")&&this.digitalSignatures.length&&this.digitalSignatures.forEach((function(e){e.input.hasAttribute("required")&&""===e.input.value&&(t.formValidation=!1,e.handler.triggerError())})),this.choices.length){this.choices.forEach((function(e){(e.passedElement.element.hasAttribute("multiple")?function multipleValidation(e){return!e.passedElement.element.hasAttribute("data-was-required")||("none"===e.containerOuter.element.parentNode.style.display||e.getValue().length>0)}(e):function singleValidation(e){if(!e.passedElement.element.hasAttribute("required"))return!0;var t=e.getValue();return!t.placeholder&&""!==t}(e))||(t.formValidation=!1,e.triggerError())}))}if(Object.keys(this.checkboxes).length){var r=function _loop(t){var r=e.checkboxes[t];if(!r.required)return"continue";r.fields.forEach((function(e){return r.valid=!!r.valid||e.checked}))};for(var n in this.checkboxes)r(n);var a=function _loop2(r){var n=e.checkboxes[r];n.required&&!n.valid&&n.fields.forEach((function(e,t){null!==e.offsetParent||(n.valid=!0)})),n.required&&!n.valid&&(t.formValidation=!1,n.fields.forEach((function(t,r){0===r&&(t.setAttribute("required","true"),e.form.reportValidity(),setTimeout((function(){return t.removeAttribute("required")}),1e3))})))};for(var i in this.checkboxes)a(i)}return this.hasOwnProperty("akismet")&&t.formValidation&&(t.formValidation=!this.akismet),this.honeypot&&this.honeypotFields.forEach((function(e){""!==e.value&&(t.formValidation=!1)})),this.datePickers.length&&this.datePickers.forEach((function(r){r.hasAttribute("required")&&!r.value&&(t.formValidation=!1,r.removeAttribute("readonly"),e.form.reportValidity(),r.setAttribute("readonly",!0))})),this.grecaptcha?t.formValidation&&t.recaptcha:t.formValidation}},{key:"sleep",value:function sleep(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"verifyAndStartPayments",value:(c=u()(y.a.mark((function _callee(){var e;return y.a.wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(this.paymentForm=!1,this.multiplePaymentMethods=!1,this.payments=null,e=[],null!==this.form.querySelector('[data-kali-form-type="wireTransfer"]')&&e.push("wireTransfer"),"undefined"!=typeof paypal&&e.push("paypal"),"undefined"!=typeof Stripe&&"undefined"!=typeof KaliFormsStripe&&KaliFormsStripe.hasOwnProperty("key")&&e.push("stripe"),e.length){t.next=9;break}return t.abrupt("return");case 9:return this.handlePayments(v),"undefined"!=typeof KaliPaymentsPluginHelper&&this.handlePayments(KaliPaymentsPluginHelper),t.next=13,this.gatherProducts();case 13:if(this._products.length&&(this.paymentForm=!0),this.multiplePaymentMethods=e.length>1,!e.includes("stripe")){t.next=21;break}return this.handlePayments(KaliPaymentsPluginHelper),t.next=19,this.handleStripePayment(Stripe);case 19:t.sent.includes("iban")&&e.push("stripeiban");case 21:e.includes("paypal")&&(this.paypalObject=null,this.handlePayPalPayment(paypal)),this.paymentMethodChooser=this._getPaymentMethodChooser(e),this.form.dispatchEvent(new CustomEvent("kaliFormPaymentChecked",{detail:{paymentForm:this.paymentForm,getCart:"function"==typeof this.getCart?this.getCart:null,paymentMethodChooser:this.paymentMethodChooser,products:this._products}}));case 24:case"end":return t.stop()}}),_callee,this)}))),function verifyAndStartPayments(){return c.apply(this,arguments)})},{key:"attachInitialLoadevent",value:function attachInitialLoadevent(){var e=this;this.initialLoaded=!1,document.addEventListener("kaliFormProcessConstructed",function(){var t=u()(y.a.mark((function _callee2(t){return y.a.wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:if(e.saveInitialSnapshot(),!e.conditionalFields){t.next=9;break}case 2:if(e.conditionalFieldsLoaded){t.next=7;break}return t.next=5,e.sleep(50);case 5:t.next=2;break;case 7:return e.initialLoaded=!0,t.abrupt("return");case 9:e.initialLoaded=!0;case 10:case"end":return t.stop()}}),_callee2)})));return function(e){return t.apply(this,arguments)}}()),this.scrollTyIntoView()}},{key:"checkHoneypot",value:function checkHoneypot(){var e=document.getElementById("kf-name-field"),t=document.getElementById("kf-email-field");if(null!==e&&null!==t)return this.honeypotFields=[e,t],void(this.honeypot=!0);this.honeypot=!1}},{key:"enableStyling",value:function enableStyling(){var e=this;switch(this.style){case"inputLabelMerge":o()(this.formElements).map((function(t){"BUTTON"!==t.tagName&&(["hidden","checkbox","radio","button","submit","file"].includes(t.getAttribute("type"))||e.wrapAll(t.parentNode).classList.add(e.style))}));break;case"inputLabelMergeOverlap":o()(this.formElements).map((function(t){if("BUTTON"!==t.tagName&&!["hidden","button","submit","file"].includes(t.getAttribute("type"))){if(["checkbox","radio"].includes(t.getAttribute("type"))){var r=t.parentNode.parentNode;if(t.parentNode.classList.contains("image-radio-label"))return;if(r.classList.contains(e.style))return;var n=e.wrapAll(t.parentNode.parentNode);return n.classList.add(e.style),void n.classList.add("checkbox-radio")}if(t.classList.contains("kaliforms-date-time-picker")){var a=t.parentNode.parentNode.parentNode;if(a.classList.contains(e.style))return;e.wrapAll(a).classList.add(e.style)}else{e.wrapAll(t.parentNode).classList.add(e.style)}}}))}}},{key:"wrapAll",value:function wrapAll(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document.createElement("div");return o()(e.childNodes).forEach((function(e){return t.appendChild(e)})),e.appendChild(t),t}},{key:"determineDatePickers",value:function determineDatePickers(){var e=this;o()(this.formElements).forEach((function(t){t.classList.contains("kaliforms-date-time-picker")&&e.datePickers.push(t)}))}},{key:"handleCheckboxes",value:function handleCheckboxes(){var e=this.form.querySelectorAll("input[type=checkbox]"),t={};o()(e).map((function(e){var r=e.getAttribute("name");t.hasOwnProperty(r)||(t[r]={required:!!e.hasAttribute("required"),valid:!1,fields:[]}),e.setAttribute("data-saved-value",e.getAttribute("value")),e.setAttribute("data-was-required",!!e.hasAttribute("required")),e.removeAttribute("required"),t[r].fields.push(e),t[r].valid=!!t[r].valid||e.checked})),this.checkboxes=t}},{key:"handleEditors",value:function handleEditors(){var e=this;if(window.hasOwnProperty("wp")&&wp.hasOwnProperty("editor")&&"function"==typeof wp.editor.getDefaultSettings){var t=this.form.querySelectorAll("textarea[editor]");o()(t).forEach((function(t){var r=t.getAttribute("id");null===r&&(r=t.getAttribute("data-internal-id"),t.setAttribute("id",r)),t.setAttribute("data-was-required",!!t.hasAttribute("required")),t.removeAttribute("required"),e.editors.push(t),wp.editor.initialize(r,{tinymce:{wpautop:!1,plugins:"charmap colorpicker compat3x directionality fullscreen hr image lists media paste tabfocus textcolor wordpress wpautoresize wpdialogs wpeditimage wpemoji wpgallery wplink wptextpattern wpview",toolbar1:"formatselect bold italic | bullist numlist | blockquote | alignleft aligncenter alignright | link unlink | spellchecker",setup:function setup(e){return e.on("change",(function(){var r=new Event("change");t.dispatchEvent(r),e.save()}))}},quicktags:!0})}))}}},{key:"handleInputMasks",value:function handleInputMasks(){var e=this.form.querySelectorAll("[data-format]"),t={us:["(",/[1-9]/,/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],usWithCode:["+","1"," ",/[1-9]/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/]};o()(e).forEach((function(e){var r=e.getAttribute("data-format");t.hasOwnProperty(r)&&x({inputElement:e,mask:t[r],guide:!0,showMask:!0})}))}},{key:"handlePayments",value:function handlePayments(e){for(var t in e)this.hasOwnProperty(t)||(this[t]=e[t].bind(this))}},{key:"handleFileUploads",value:function handleFileUploads(){var e=this,t=this.form.querySelectorAll("[type='file']");"undefined"!=typeof FilePond&&o()(t).map((function(t){var r=FilePond.create(t);e.uploadFields.push(t.getAttribute("name"));var n={required:t.hasAttribute("required"),name:t.getAttribute("name"),disabled:t.hasAttribute("readonly"),allowImagePreview:t.hasAttribute("imagepreview"),maxFileSize:t.getAttribute("data-maxfilesize"),minFileSize:t.getAttribute("data-minfilesize"),maxTotalFileSize:t.getAttribute("data-maxtotalfilesize"),instantUpload:t.hasAttribute("instantupload"),allowMultiple:t.hasAttribute("multiple"),maxFiles:t.hasAttribute("data-maxfiles")?parseInt(t.getAttribute("data-maxfiles")):2,acceptedFileTypes:null!==t.getAttribute("data-acceptedextensions")?t.getAttribute("data-acceptedextensions").split(","):null,fileRenameFunction:function fileRenameFunction(e){var r=t.getAttribute("data-fileprefix");return null!==r?"".concat(r).concat(e.name):e.name},oninit:function oninit(){return document.dispatchEvent(new CustomEvent("kaliFormUploadFieldInit",{detail:{name:t.getAttribute("name"),instance:r}}))},oninitfile:function oninitfile(){return e.submitButton.setAttribute("disabled","disabled")},onprocessfiles:function onprocessfiles(){return e.submitButton.removeAttribute("disabled")},onprocessfilerevert:function onprocessfilerevert(){r.instantUpload||e.submitButton.setAttribute("disabled","disabled")},onremovefile:function onremovefile(){r.getFiles().filter((function(e){return 5!==e.status})).length?e.submitButton.setAttribute("disabled","disabled"):e.submitButton.removeAttribute("disabled")}},a=window.generalFilePondSettings.settings;t.hasAttribute("multiple")&&(a.labelIdle=sprintf(g("Drag & Drop your files (max %s) or","kaliforms"),n.maxFiles)+' <span class="filepond--label-action"> '+g("Browse","kaliforms")+" </span>"),r.setOptions(_objectSpread(_objectSpread({},a),n))}))}},{key:"handleRecaptcha",value:function handleRecaptcha(){var e=this;this.grecaptcha=!1;var t=this.form.querySelectorAll("[data-field-type='grecaptcha']");(t=o()(t)).length&&"undefined"!=typeof grecaptcha&&(this.grecaptcha=!0,this.grecaptchaValidation=!1,grecaptcha.ready((function(){t.forEach((function(t){grecaptcha.render(t.getAttribute("id"),{sitekey:t.getAttribute("data-sitekey"),callback:e.verifyRecaptchaCallback.bind(e)})}))})))}},{key:"verifyRecaptchaCallback",value:function verifyRecaptchaCallback(e){var t=this,r={action:"kaliforms_form_verify_recaptcha",data:{formId:this.formId,nonce:this.nonce,token:e}};null!==this.submitButton&&this.submitButton.setAttribute("disabled","disabled"),this.axios.post(KaliFormsObject.ajaxurl,this.Qs.stringify(r)).then((function(e){if(null!==t.submitButton&&t.submitButton.removeAttribute("disabled"),e.data.hasOwnProperty("error"))t.throwError();else{t.grecaptchaValidation=e.data.response.success;var r=new Event("change");t.form.dispatchEvent(r)}})).catch((function(e){console.log(e)}))}},{key:"setupValidation",value:function setupValidation(){}},{key:"preFlightRequest",value:(l=u()(y.a.mark((function _callee3(){var e;return y.a.wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return e={action:"kaliforms_preflight",data:{formId:this.formId,nonce:this.nonce,data:this._getFormData()}},t.abrupt("return",this.axios.post(KaliFormsObject.ajaxurl,this.Qs.stringify(e)));case 2:case"end":return t.stop()}}),_callee3,this)}))),function preFlightRequest(){return l.apply(this,arguments)})},{key:"removeAllErrors",value:function removeAllErrors(){for(var e in this._formFieldHTMLMap)this._formFieldHTMLMap[e].classList.remove("kali-error")}},{key:"scrollTyIntoView",value:function scrollTyIntoView(){var e=this;document.addEventListener("kaliformShownThankYouMessage",(function(t){e.scrollThankYouIntoView&&document.querySelector("#kaliforms-thank-you-message-".concat(e.formId)).scrollIntoView({behavior:"smooth",block:"start"})}))}},{key:"handleSubmit",value:function handleSubmit(){var e=this;this.form.addEventListener("submit",function(){var t=u()(y.a.mark((function _callee4(t){var r,n,a,i;return y.a.wrap((function _callee4$(o){for(;;)switch(o.prev=o.next){case 0:if(t.preventDefault(),document.getElementById("kaliforms-global-error-message-".concat(e.formId)).style.display="none",e.errorMessage=e.globalErrorMessage,e.removeAllErrors(),e.loading=!0,r=e._getFormData(),n=!0,!e.preFlightNeeded||e.hasOwnProperty("akismet")){o.next=12;break}return o.next=10,e.preFlightRequest();case 10:for(i in(a=o.sent).data)e[i]=a.data[i];case 12:if(!e.paymentForm){o.next=16;break}return o.next=15,e.handleSubmitPayment(r);case 15:n=o.sent;case 16:e.valid&&n?e.makeRequest(e._getFormData()):e.throwError();case 17:case"end":return o.stop()}}),_callee4)})));return function(e){return t.apply(this,arguments)}}(),!0)}},{key:"handleSubmitPayment",value:(s=u()(y.a.mark((function _callee5(e){var t;return y.a.wrap((function _callee5$(r){for(;;)switch(r.prev=r.next){case 0:if(null===this.payments||!this.payments.hasOwnProperty("payment_id")){r.next=2;break}return r.abrupt("return",!0);case 2:if(!this.multiplePaymentMethods){r.next=8;break}return r.next=5,this.handleMultiplePaymentMethods(e);case 5:r.t0=r.sent,r.next=11;break;case 8:return r.next=10,this.handleSinglePaymentMethod(e);case 10:r.t0=r.sent;case 11:return(t=r.t0)&&this.form.dispatchEvent(new CustomEvent("kaliformPaymentProcessed",{detail:{payments:this.payments}})),r.abrupt("return",t);case 14:case"end":return r.stop()}}),_callee5,this)}))),function handleSubmitPayment(e){return s.apply(this,arguments)})},{key:"handleSinglePaymentMethod",value:(i=u()(y.a.mark((function _callee6(e){var t,r;return y.a.wrap((function _callee6$(n){for(;;)switch(n.prev=n.next){case 0:if(null===this.form.querySelector('[data-kali-form-type="wireTransfer"]')){n.next=5;break}return n.next=3,this._processWireTransfer(e);case 3:return t=n.sent,n.abrupt("return",t.success);case 5:return n.next=7,this.processStripe(e,"stripe");case 7:return r=n.sent,n.abrupt("return",r.success);case 9:case"end":return n.stop()}}),_callee6,this)}))),function handleSinglePaymentMethod(e){return i.apply(this,arguments)})},{key:"handleMultiplePaymentMethods",value:(n=u()(y.a.mark((function _callee7(e){var t,r,n;return y.a.wrap((function _callee7$(a){for(;;)switch(a.prev=a.next){case 0:if(null!==this.paymentMethodChooser){a.next=2;break}return a.abrupt("return",!1);case 2:if(t=this._getPaymentMethodTranslated(e[this.paymentMethodChooser.getAttribute("name")]),!["stripe","stripeiban"].includes(t)){a.next=8;break}return a.next=6,this.processStripe(e,t);case 6:return r=a.sent,a.abrupt("return",r.success);case 8:if("paypal"!==t||null!==this.payments){a.next=11;break}return this.errorMessage=g("Please complete the payment by clicking the PayPal button","kaliforms"),a.abrupt("return",!1);case 11:if("wiretransfer"!==t){a.next=16;break}return a.next=14,this._processWireTransfer(e);case 14:return n=a.sent,a.abrupt("return",n.success);case 16:case"end":return a.stop()}}),_callee7,this)}))),function handleMultiplePaymentMethods(e){return n.apply(this,arguments)})},{key:"processStripe",value:(r=u()(y.a.mark((function _callee8(e,t){var r,n,i;return y.a.wrap((function _callee8$(o){for(;;)switch(o.prev=o.next){case 0:if(r={success:!1,message:g("Something went wrong","kaliforms")},this._products.length){o.next=3;break}return o.abrupt("return",{success:!1,message:g("You don't have products in your form.","kaliforms")});case 3:if("object"!==a()(this.stripe)||!this._products.length){o.next=15;break}return n=void 0!==this.paymentRequestEvent?"paymentRequest":t,i={stripe:this._processStripe,paymentRequest:this._processStripeRequestButton,stripeiban:this._processStripeIban},o.prev=6,o.next=9,i[n].call(this,e);case 9:r=o.sent,o.next=15;break;case 12:o.prev=12,o.t0=o.catch(6),console.log(o.t0);case 15:if(null===r||r.success){o.next=18;break}return this.errorMessage=r.message,o.abrupt("return",r);case 18:return o.abrupt("return",r);case 19:case"end":return o.stop()}}),_callee8,this,[[6,12]])}))),function processStripe(e,t){return r.apply(this,arguments)})},{key:"throwError",value:function throwError(){document.getElementById("kaliforms-global-error-message-".concat(this.formId)).style.display="block",document.dispatchEvent(new CustomEvent("kaliformProcessError",{detail:this})),this.loading&&(this.loading=!1)}},{key:"makeRequest",value:(t=u()(y.a.mark((function _callee9(e){return y.a.wrap((function _callee9$(t){for(;;)switch(t.prev=t.next){case 0:if(null===this.form.getAttribute("action")){t.next=4;break}return document.createElement("form").submit.call(this.form),t.abrupt("return");case 4:return t.next=6,this._processForm(e);case 6:case"end":return t.stop()}}),_callee9,this)}))),function makeRequest(e){return t.apply(this,arguments)})},{key:"_processForm",value:(e=u()(y.a.mark((function _callee10(e){var t,r=this;return y.a.wrap((function _callee10$(n){for(;;)switch(n.prev=n.next){case 0:return this.paymentForm&&(e.payments=this.payments),0===(t={action:"kaliforms_form_process",data:e,extraArgs:this._getExtra()}).extraArgs.length&&(t.extraArgs=""),n.abrupt("return",k.post(KaliFormsObject.ajaxurl,this.Qs.stringify(t)).then((function(e){if(e.data.hasOwnProperty("error"))r.throwError();else{if(e.data.hasOwnProperty("terminated")&&e.data.terminated)return e.data.hasOwnProperty("terminated_reason")&&(r.errorMessage=e.data.terminated_reason),e.data.hasOwnProperty("error_bag")&&e.data.error_bag.length&&e.data.error_bag.map((function(e){r._formFieldHTMLMap.hasOwnProperty(e.field)&&r._formFieldHTMLMap[e.field].classList.add("kali-error")})),void r.throwError();r.loading=!1,r.showThankYouMessage(e.data),e.data.hasOwnProperty("redirect_url")&&""!==e.data.redirect_url&&setTimeout((function(){return window.location.href=e.data.redirect_url}),1e3*parseInt(e.data.redirect_timeout))}})).catch((function(e){console.log(e)})));case 4:case"end":return n.stop()}}),_callee10,this)}))),function _processForm(t){return e.apply(this,arguments)})},{key:"_getExtra",value:function _getExtra(){return this.uploadFields}},{key:"_getFormData",value:function _getFormData(){var e=this,t={formId:this.formId,nonce:this.nonce};return o()(this.formElements).map((function(r){switch(r.getAttribute("type")){case"checkbox":var n=[];o()(document.getElementsByName(r.getAttribute("name"))).map((function(e){return!!e.checked&&n.push(e.value)})),t[r.getAttribute("name")]=n;break;case"radio":var a="";o()(document.getElementsByName(r.getAttribute("name"))).map((function(e){return!!e.checked&&(a=e.value)})),t[r.getAttribute("name")]=a;break;case"submit":break;case"choices":var i=r.querySelectorAll("option:checked");t[r.getAttribute("name")]=Array.from(i).map((function(e){return e.value}));break;case"hidden":if(e._getExtra().includes(r.getAttribute("name"))){var s=t[r.getAttribute("name")];return void(t[r.getAttribute("name")]=void 0!==s?t[r.getAttribute("name")]+","+r.value:r.value)}null!==r.getAttribute("name")&&(t[r.getAttribute("name")]=r.value);break;default:null!==r.getAttribute("name")&&(t[r.getAttribute("name")]=r.value)}})),t}},{key:"showThankYouMessage",value:function showThankYouMessage(e){var t=e.hasOwnProperty("reset")&&"1"===e.reset;this.scrollThankYouIntoView=e.hasOwnProperty("scroll_to_thank_you")&&"1"===e.scroll_to_thank_you,t?this._resetFormAndShowThankYouMessage(e):this._hideFormAndShowThankYou(e)}},{key:"_resetFormAndShowThankYouMessage",value:function _resetFormAndShowThankYouMessage(e){var t=this;this.form.insertAdjacentHTML("beforebegin",'<div id="kaliforms-thank-you-message-'.concat(this.formId,'">').concat(e.thank_you_message,"</div>")),this.form_data=e.form_data,document.dispatchEvent(new CustomEvent("kaliformShownThankYouMessage",{detail:this})),this.resetForm(),setTimeout((function(){return document.getElementById("kaliforms-thank-you-message-".concat(t.formId)).remove()}),5e3)}},{key:"_hideFormAndShowThankYou",value:function _hideFormAndShowThankYou(e){var t=this;this.form.classList.add("fade-out-top");var r=this.whichAnimationEvent();r&&this.form.addEventListener(r,(function(){t.form.insertAdjacentHTML("beforebegin",' <div id="kaliforms-thank-you-message-'.concat(t.formId,'">').concat(e.thank_you_message,"</div>")),t.form.parentNode.removeChild(t.form),t.form_data=e.form_data,document.dispatchEvent(new CustomEvent("kaliformShownThankYouMessage",{detail:t}))}))}},{key:"appendLoader",value:function appendLoader(){this.form.classList.add("kaliform-loading");this.form.insertAdjacentHTML("beforeend",'<div id="kaliform-loader-container" class="kaliform-loader-container"><div class="kaliform-loader"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div>')}},{key:"removeLoader",value:function removeLoader(){var e=document.getElementById("kaliform-loader-container");this.form.classList.remove("kaliform-loading"),null!==e&&this.form.removeChild(e)}},{key:"resetForm",value:function resetForm(){var e=this;this.form.dispatchEvent(new CustomEvent("kaliResetForm",{detail:this})),o()(this.formElements).map((function(t){var r=t.getAttribute("name"),n=e._formFieldMap[r];if(e._initialSnapshot.hasOwnProperty(r)){switch(n){case"rating":jQuery(".ui.rating").rating("set rating",parseFloat(e._initialSnapshot[r]));break;case"checkbox":t.checked=e._initialSnapshot[r].includes(t.value);break;default:t.value=e._initialSnapshot[r]}var a=new Event("change");t.dispatchEvent(a)}}))}},{key:"saveInitialSnapshot",value:function saveInitialSnapshot(){this._initialSnapshot=this._getFormData();var e=this._defineMap();this._formFieldMap=e.types,this._formFieldHTMLMap=e.html}},{key:"_defineMap",value:function _defineMap(){var e={},t={};return o()(this.formElements).map((function(r){null!==r.getAttribute("name")&&(e[r.getAttribute("name")]=r.getAttribute("type"),t[r.getAttribute("name")]=r,r.hasAttribute("data-kali-form-type")&&(e[r.getAttribute("name")]=r.getAttribute("data-kali-form-type")))})),{types:e,html:t}}},{key:"whichAnimationEvent",value:function whichAnimationEvent(){var e,t=document.createElement("fakeelement"),r={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(e in r)if(void 0!==t.style[e])return r[e]}}]),FormProcessor}()},5:function(e,t){e.exports=function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports},6:function(e,t){e.exports=function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports},7:function(e,t){function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports},70:function(e,t){},9:function(e,t){e.exports=function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports}});